(window._vfP=window._vfP||[]).push([[27,110],{1156:function(t,e,n){"use strict";var i=n(788);n.n(i).a},1157:function(t,e,n){"use strict";var i=n(789);n.n(i).a},1158:function(t,e,n){"use strict";var i=n(790);n.n(i).a},1159:function(t,e,n){"use strict";var i=n(791);n.n(i).a},1160:function(t,e,n){"use strict";var i=n(792);n.n(i).a},1161:function(t,e,n){"use strict";var i=n(793);n.n(i).a},1162:function(t,e,n){"use strict";var i=n(794);n.n(i).a},1163:function(t,e,n){"use strict";var i=n(795);n.n(i).a},1164:function(t,e,n){"use strict";var i=n(796);n.n(i).a},1471:function(t,e,n){"use strict";n.r(e);n(41),n(12),n(6),n(7),n(4),n(18);var i=n(3),r=n(0),o=n(141),s=n(168),a=n(2),c=n(57),u=n(14),l=n(138),d=n(295),f=(n(15),n(27),n(23),n(30),n(10),n(28),n(217)),h=n(488),p=n(485),b=n(369),m=n(185),v=n(563),_=n(502),g=n.n(_),y=n(56),O=n(167),E=n(140),C=n(13),T=n(876),S=n(570),j=n(461),A=n(880),w=n(445),P=n(125),R=n(882),N=n(24);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D={props:{contentContainer:N.a.object.isRequired,sectionUuid:N.a.uuid.isRequired},mounted:function(){this.$subscribe(a.C.CHANNEL,a.C.EVENTS.LOADED,this.handleUserLoaded)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({isSubscribedToLivecomments:r.Sb,currentUser:r.eb,getSettingsByUuid:r.wc}),{isSubscribedToContentContainer:function(){return this.isSubscribedToLivecomments(this.contentContainer.content_container_uuid)},settings:function(){return this.getSettingsByUuid(this.sectionUuid)},canFollowContentContainer:function(){return Object(C.h)(this.settings)}}),methods:{toggleSubscription:function(){if(P.a.getInstance().$authorize("follow","page",[this.currentUser,this.settings],{action:w.o})){var t=this.isSubscribedToContentContainer?i.td:i.Ic;this.$store.dispatch(t,{content_container_uuid:this.contentContainer.content_container_uuid,section_uuid:this.sectionUuid})}},handleUserLoaded:function(){this.$store.dispatch(i.lb,{section_uuid:this.sectionUuid,content_container_uuid:this.contentContainer.content_container_uuid})}},components:{followButton:R.a}},$=(n(1156),n(50)),k=Object($.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"vf-comment-header"},[n("h2",{staticClass:"vf-comment-header__heading vf-heading-text"},[t._v("\n        "+t._s(t.$i18n("comments.heading"))+"\n    ")]),t._v(" "),t.canFollowContentContainer?n("follow-button",{staticClass:"vf-comment-header__subscribe",attrs:{"is-following":t.isSubscribedToContentContainer,"unfollow-text":t.$i18n("user_actions.unfollow"),"is-following-text":t.$i18n("user_actions.following"),"is-following-aria":t.$i18n("conversations.content_container.user_actions.unfollow_aria_label.comments"),"is-not-following-text":t.$i18n("user_actions.follow"),"is-not-following-aria":t.$i18n("conversations.content_container.user_actions.follow_aria_label.comments")},on:{click:t.toggleSubscription}}):t._e()],1)}),[],!1,null,"e0cfae36",null).exports,x=n(44),L=n(97),B=n(879),M=n(643),F=n(640);function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G={props:{contentContainer:N.a.object.isRequired,tabName:N.a.string.isRequired,areSettingsExpanded:N.a.bool.isRequired,settingsId:N.a.string.isRequired},inject:[f.a],created:function(){this.COMMENT_TABS=p.a,this.sorts=[{key:x.h.NEWEST,title:this.$i18n("conversations.sorts.newest"),buttonClass:"vf-sort-action__newest"},{key:x.h.OLDEST,title:this.$i18n("conversations.sorts.oldest"),buttonClass:"vf-sort-action__oldest"},{key:x.h.NUM_LIKES_DESC,title:this.$i18n("conversations.sorts.most_liked"),buttonClass:"vf-sort-action__most-liked"},{key:x.h.NUM_REPLIES_DESC,title:this.$i18n("conversations.sorts.most_replies"),buttonClass:"vf-sort-action__most-replies"}]},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({widgetSettings:r.td,isCurrentUserModOrAdmin:r.Mb}),{sorted_by:function(){return this.widgetSettings(this.contentContainer.content_container_uuid).sorted_by}}),methods:{handleSortSelected:function(t){var e=this,n=t.key,r=this.contentContainer.content_container_uuid;Object(L.f)(this.$store.commit,v.b,r),this.$store.dispatch(i.zd,{content_container_uuid:r,sorted_by:n}).then((function(){Object(L.g)(e.$store.commit,v.b,r)})).catch((function(){Object(L.e)(e.$store.commit,v.b,r)}))}},components:{settingsButton:B.a,selectDropdown:M.a,vfBell:F.default}},z=(n(1157),Object($.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-nav-right"},[n("select-dropdown",{staticClass:"vf-sort-actions",class:{"vf-sort-actions--hidden":t.tabName!==t.COMMENT_TABS.ALL_COMMENTS},attrs:{autohide:"",positions:["bottom-left","bottom-right","right-bottom","left-bottom"],items:t.sorts,selection:t.sorted_by,"enable-hover-light":!1},on:{"list-item-clicked":t.handleSortSelected}}),t._v(" "),n("div",{staticClass:"comment-nav-right__settings-button",class:{"comment-nav-right__settings-button--expanded":this.areSettingsExpanded}},[t.isCurrentUserModOrAdmin?n("settings-button",{staticClass:"comment-nav-right__icon",attrs:{palette:t.PALETTES.ACCENT,"aria-label":t.$i18n("conversations.navigation.settings_aria"),"aria-expanded":t.areSettingsExpanded.toString(),"aria-controls":t.settingsId},nativeOn:{click:function(e){return t.$emit("settings-toggled")}}}):t._e()],1),t._v(" "),t.areSettingsExpanded?n("a",{staticClass:"vf-offscreen-until-focused-text",attrs:{href:"#"+t.settingsId}},[t._v("\n        "+t._s(t.$i18n("conversations.navigation.settings_a11y_jump"))+"\n    ")]):t._e(),t._v(" "),n("vf-bell",{staticClass:"comment-nav-right__icon"})],1)}),[],!1,null,"7054008b",null).exports),V=n(467),Y=n(616),W=n(877),K=n(465),J=n(451),Z=n(498),Q=(n(93),n(36),n(37),n(139),n(1)),X=n(290),tt=n(126),et=n(447),nt=n(287),it=n(471),rt=n(123),ot=n(571),st=n(869),at=n(885),ct=n(588),ut=n(468),lt=n(80),dt=n(458),ft=n(503),ht=n(457),pt=n(462),bt=n(710),mt=n(711),vt=n(611),_t=n(452),gt=n(870);function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Et={props:{comment:N.a.object.isRequired,isEntered:N.a.bool.def(!1),isStub:N.a.bool.def(!1)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({currentUser:r.eb,siteSettings:r.Dc,getUserByUuid:r.ed,isCommentingExpired:r.vb}),{commentActor:function(){return this.getUserByUuid(this.comment.actor_uuid)},isLiked:function(){return this.comment.actions.includes(_t.a.LIKE)},isDisliked:function(){return this.comment.actions.includes(_t.a.DISLIKE)},isReplyEnabled:function(){return!this.isStub&&!this.isCommentingExpired(this.comment.content_container_uuid)},enabledContentActions:function(){return{isReplyEnabled:this.isReplyEnabled,isLikeEnabled:!this.isStub,isDislikeEnabled:!this.isStub,isFlagEnabled:!this.isStub,isShareEnabled:!this.isStub}}}),methods:{toggleLike:function(){if(P.a.getInstance().$authorize(_t.a.LIKE,"comment",[this.currentUser],{action:w.n})){var t=this.isLiked?i.nd:i.Wb;this.$store.dispatch(t,this.comment.content_uuid)}},toggleDislike:function(){if(P.a.getInstance().$authorize(_t.a.DISLIKE,"comment",[this.currentUser,this.siteSettings],{action:w.l})){var t=this.isDisliked?i.id:i.I;this.$store.dispatch(t,this.comment.content_uuid)}},handleFlag:function(){P.a.getInstance().$authorize(_t.a.FLAG,"content",[this.currentUser,this.siteSettings,this.commentActor],{action:w.m})&&this.$store.dispatch(i.Gb,this.comment.content_uuid)}},components:{contentActions:gt.a}},Ct=Object($.a)(Et,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("content-actions",t._b({staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"content-type":t.$i18n("comments.comment",{count:1})},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies")},"toggle-like":t.toggleLike,"toggle-dislike":t.toggleDislike,flag:t.handleFlag}},"content-actions",t.enabledContentActions,!1))}),[],!1,null,null,null).exports,Tt=n(607),St=n(868),jt={props:{comment:N.a.object.isRequired},methods:{handleUnflag:function(){this.$store.dispatch(i.k,this.comment.content_uuid)},handleUnspam:function(){this.$store.dispatch(i.sd,this.comment.content_uuid)},handleDisable:function(){this.$store.dispatch(i.F,this.comment.content_uuid)},handleEnable:function(){this.$store.dispatch(i.T,this.comment.content_uuid)}},components:{moderationActions:St.a}},At=Object($.a)(jt,(function(){var t=this.$createElement;return(this._self._c||t)("moderation-actions",{attrs:{content:this.comment},on:{disable:this.handleDisable,unflag:this.handleUnflag,unspam:this.handleUnspam,enable:this.handleEnable}})}),[],!1,null,null,null).exports,wt=n(67),Pt=n(893);function Rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var It={props:{comment:N.a.object.isRequired,isEntered:N.a.bool.def(!1),isContentRemovalEnabled:N.a.bool.def(!1)},created:function(){this.CONTENT_ACTIONS=_t.a},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(n),!0).forEach((function(e){Nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({getLivecommentsSettingsByUuid:r.R,getContentEditingDuration:r.Q}),{isFlagged:function(){return this.comment.actions.includes(_t.a.FLAG)},isSpam:function(){return this.comment.state_reasons.includes(wt.d.CONTENT_MARKED_AS_SPAM)},isDisabled:function(){return this.comment.state_reasons.includes(wt.d.CONTENT_DISABLED)},contentContainerSettings:function(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},contentEditingDuration:function(){return this.getContentEditingDuration(this.comment.content_container_uuid)}}),methods:{handleFlag:function(){this.$store.dispatch(i.Gb,this.comment.content_uuid)},toggleFlag:function(){var t=this.isFlagged?i.k:i.Gb;this.$store.dispatch(t,this.comment.content_uuid)},toggleEditorsPick:function(){var t=this.comment.is_picked?i.M:i.K;this.$store.dispatch(t,this.comment.content_uuid)},toggleSpam:function(){var t=this.isSpam?i.sd:i.Hc;this.$store.dispatch(t,this.comment.content_uuid)},toggleDisable:function(){var t=this.isDisabled?i.T:i.F;this.$store.dispatch(t,this.comment.content_uuid)},togglePin:function(){var t=this.comment.is_pinned?i.qd:i.mc;this.$store.dispatch(t,this.comment.content_uuid)},handleRemove:function(){this.$store.dispatch(i.Bc,this.comment.content_uuid)}},components:{secondaryActions:Pt.a}},Ut=Object($.a)(It,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("secondary-actions",{staticClass:"vf-comment-actions",attrs:{content:t.comment,"is-entered":t.isEntered,"is-flag-enabled":"","is-live-comments":"","is-content-removal-enabled":t.isContentRemovalEnabled,"is-content-editing-enabled":t.contentContainerSettings.is_content_editing_enabled,"content-editing-duration":t.contentEditingDuration},on:{edit:function(e){return t.$emit(t.CONTENT_ACTIONS.EDIT)},remove:t.handleRemove,flag:t.handleFlag,"toggle-flag":t.toggleFlag,"toggle-editors-pick":t.toggleEditorsPick,"toggle-spam":t.toggleSpam,"toggle-disable":t.toggleDisable,"toggle-pin":t.togglePin}})}),[],!1,null,null,null).exports,Dt=n(890),$t=n(897),kt=n(898),xt=n(899),Lt=n(900),Bt=n(891),Mt=n(561),Ft=n(463),Ht=n(892),qt=n(872);function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yt={props:{comment:N.a.object.isRequired,isReply:N.a.bool.def(!1),locationInThread:ct.b.isRequired,threadPalette:ct.a.isRequired,isReplyToClickable:N.a.bool},inject:[f.a,f.e],data:function(){return{isEntered:!1,editorStatus:ut.STATIC,hasContentUpdated:!1,editorContents:null,editorErrorMessage:""}},setup:function(t,e){var n=t.comment.content_uuid,i=e.parent.$store;return zt({},Object(bt.a)(i,n),{},Object(mt.a)(i,n))},mounted:function(){var t=this.comment.content_uuid,e=this.$el.getBoundingClientRect(),n=e.top,i=e.bottom,r=n<0,o=window.innerHeight-i<0;this.shouldScrollToSelf(r||o)&&this.scrollToSelf(t),this.observe()},beforeDestroy:function(){this.unobserve()},computed:zt({},Object(l.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Pc)]},isUnreadReplyInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Vb)]},isUnreadMentionInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Ub)]}}),{},Object(l.c)({getUser:r.ed,currentUser:r.eb,contentByUuid:r.P,activeReplyThreadByContainerUuid:r.a,mentionNotificationByContentUuid:r.ad,getLivecommentsSettingsByUuid:r.R,isOwner:r.Yb}),{ariaTitle:function(){return this.isStubbed?this.isReply?this.$i18n("conversations.posts.aria_title.stubbed.reply"):this.$i18n("conversations.posts.aria_title.stubbed.comment"):this.isReply?this.$i18n("conversations.posts.aria_title.enabled.reply",{username:this.user.name}):this.$i18n("conversations.posts.aria_title.enabled.comment",{username:this.user.name})},thread:function(){return this.threadByUuid(this.comment.thread_uuid)},parent:function(){return this.contentByUuid(this.comment.parent_uuid)},replyingTo:function(){return this.getUser(this.comment.parent_actor_uuid)},contentUuid:function(){return this.comment.content_uuid},avatarSize:function(){return this.isReply||rt.e?dt.a.SMALL:dt.a.MEDIUM},isOnlyContentInThread:function(){return this.locationInThreadBasedOnEditorStatus===nt.c.ONLY},avatarOutline:function(){return this.isReply?this.PALETTES.NONE:this.isOnlyContentInThread?this.PALETTES.NONE:this.threadPalette===this.PALETTES.ACCENT?this.PALETTES.ACCENT:this.threadPalette===this.PALETTES.MENTION?this.PALETTES.MENTION:this.PALETTES.LIGHT_PRIMARY},user:function(){var t=this.getUser(this.comment.actor_uuid);return this.isMutedStub||this.isDisabledStub||this.isDeletedStub||!t?this.getUser(lt.c):t},isCurrentUserTheContentActor:function(){return this.comment.actor_uuid===this.currentUser.uuid},replyName:function(){return this.isReply&&this.replyingTo?this.replyingTo.name:""},boundingClientRect:function(){var t=this.$el.getBoundingClientRect();return{top:t.top,bottom:t.bottom}},notifierPalette:function(){return this.isUnreadMention?this.PALETTES.MENTION:this.PALETTES.ACCENT},isCurrentUserModOrAdmin:function(){return Object(C.F)(this.currentUser)},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.comment.content_container_uuid)},isMention:function(){return this.comment.parent_actor_uuid===this.currentUser.uuid&&this.comment.actor_uuid!==this.currentUser.uuid},mentionNotification:function(){return this.mentionNotificationByContentUuid(this.comment.content_uuid)},hasNotifier:function(){return this.isUnreadMention||this.isUnreadReply},threadUuidForUnreadContent:function(){return this.thread.thread_top_uuid&&this.comment.content_container_uuid!==this.thread.thread_top_uuid?this.thread.thread_top_uuid:this.comment.thread_uuid},isUnreadReply:function(){return this.isUnreadReplyInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},isUnreadMention:function(){return this.isUnreadMentionInThread({thread_uuid:this.threadUuidForUnreadContent,content_uuid:this.comment.content_uuid})},contentContainerSettings:function(){return this.getLivecommentsSettingsByUuid(this.comment.content_container_uuid)},isEditorStatusStatic:function(){return this.editorStatus===ut.STATIC},locationInThreadBasedOnEditorStatus:function(){return this.isEditorStatusStatic?this.locationInThread:nt.c.ONLY},isEditorContentDifferent:function(){return this.editorContents&&this.editorContents!==this.comment.content},isContentRemovalEnabled:function(){return this.contentContainerSettings.is_content_removal_enabled},isReplyToEditedPost:function(){return this.parent&&this.parent.date_edited>this.comment.date_created}}),methods:zt({},Object(l.b)({markMentionNotificationAsRead:i.cc}),{intersectionHandler:function(t){var e=this,n=t?this.findPlacement(t[0]):this.comment.place;if(this.$store.commit(Q.gc,{content_uuid:this.comment.content_uuid,place:n}),this.hasNotifier&&n===nt.b.VIEW&&(setTimeout((function(){var t=e.comment,n=t.thread_uuid,r=t.content_uuid;return e.$store.dispatch("".concat(e.THREAD_NAMESPACE,"/").concat(i.zc),{thread_uuid:n,content_uuid:r})}),nt.a),this.isMention&&this.mentionNotification)){var r=this.comment.content_container_uuid,o=this.mentionNotification.notification_uuid;this.markMentionNotificationAsRead({content_container_uuid:r,notification_uuid:o})}},onEnterOrLeave:function(t){this.isEntered=t},focusOnAvatar:function(){this.$refs.avatar.$el.focus()},observe:function(){var t=this;Object(E.d)().then((function(){t.commentObserver=Object(E.a)(t.$refs.intersector,t.intersectionHandler)}))},unobserve:function(){this.commentObserver&&this.commentObserver.unobserve(this.$refs.intersector)},findPlacement:function(t){var e=t.isIntersecting,n=t.boundingClientRect,i=t.rootBounds,r=n&&i&&n.top>i.top;return e?nt.b.VIEW:r?nt.b.BELOW:nt.b.ABOVE},shouldScrollToSelf:function(t){var e=this.comment,n=e.isNew,i=e.actor_uuid;return!this.activeReplyThread.thread_uuid&&n&&i===this.currentUser.uuid&&t},scrollToSelf:function(t){var e=Object(h.a)(this.THREAD_NAMESPACE,t);Object(y.a)(e).scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.d,Object(y.a)("body").scrollTop-=p.d,this.$store.commit(Q.eb,t)},handleEdit:function(){var t=this;this.editorStatus=ut.EDITABLE,setTimeout((function(){return t.$refs.contentEditor.focusOnInput()}),0)},handleFocusIn:function(t){var e=t.target;this.isEditorStatusStatic||(document.removeEventListener("click",this.closeEditorFromOutside),document.addEventListener("click",this.closeEditorFromOutside),Object(ft.a)(e)||this.$refs.contentEditor.focusOnInput())},handleContentUpdate:function(t,e){this.hasContentUpdated=t,this.editorContents=e},handleSubmitEdit:function(){var t=this;this.isEditorContentDifferent&&(this.editorErrorMessage="",this.$store.dispatch(i.P,{content_uuid:this.comment.content_uuid,content:this.editorContents}).then((function(){t.handleCancelEdit()})).catch((function(){t.editorErrorMessage=t.$i18n("settings.error.generic_error")})))},closeEditorFromOutside:function(t){this.$el.contains(t.target)||this.handleCancelEdit()},handleCancelEdit:function(){this.editorStatus=ut.STATIC,this.hasContentUpdated=!1,this.editorContents=null,this.editorErrorMessage="",document.removeEventListener("click",this.closeEditorFromOutside)}}),watch:{hasNotifier:function(){this.hasNotifier&&this.intersectionHandler()}},components:{contentFocusContainerWithActions:vt.a,contentEditor:Tt.a,threadedLayout:Mt.a,frontAvatar:Ft.a,contentActions:Ct,moderationActions:At,secondaryActions:Ut,unseenContentNotifier:Ht.a,postDetails:qt.a,disabledBadge:Dt.a,pendingBadge:$t.a,mutedBadge:kt.a,deletedBadge:xt.a,editedBadge:Lt.a,bannedBadge:Bt.a},directives:{innerFocus:ht.a,hovered:pt.a}},Wt=(n(1158),Object($.a)(Yt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{attrs:{"can-focus":!t.isEditorStatusStatic,"is-focused":!t.isEditorStatusStatic,"has-content-updated":t.hasContentUpdated,"editor-status":t.editorStatus,"is-submit-enabled":t.isEditorContentDifferent,"error-message":t.editorErrorMessage,"show-user-status":!t.isEditorStatusStatic},on:{"focus-on-element":t.handleFocusIn,submit:t.handleSubmitEdit,"cancel-edit":t.handleCancelEdit},nativeOn:{focusin:function(e){return t.handleFocusIn(e)}}},[n("div",{ref:"intersector"}),t._v(" "),n("article",{directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.onEnterOrLeave,expression:"onEnterOrLeave"},{name:"hovered",rawName:"v-hovered",value:t.onEnterOrLeave,expression:"onEnterOrLeave"}],staticClass:"vf3-comment",class:{"vf3-comment--collapsed":t.isOnlyContentInThread,"vf3-comment--entered":t.isEntered,"vf3-comment--muted":t.isMutedStub,"vf3-comment--disabled":t.isDisabledStub,"vf3-comment--pinned":t.comment.is_pinned,"vf3-comment--pinned--collapsed":t.comment.is_pinned&&t.isOnlyContentInThread},attrs:{"aria-label":t.ariaTitle}},[n("threaded-layout",{staticClass:"vf3-comment__content-layout",class:{"vf3-comment__content-layout--entered":t.isEntered},attrs:{"location-in-thread":t.locationInThreadBasedOnEditorStatus,palette:t.threadPalette},scopedSlots:t._u([{key:"left",fn:function(){return[n("unseen-content-notifier",{attrs:{"is-new":t.hasNotifier,palette:t.notifierPalette}}),t._v(" "),n("front-avatar",{ref:"avatar",staticClass:"vf3-comment__avatar",class:{"vf3-comment__top-level-avatar":!t.isReply,"vf3-comment__reply-avatar":t.isReply},attrs:{user:t.user,outline:t.avatarOutline,size:t.avatarSize,"is-clickable":!t.isStubbed}})]},proxy:!0},t.isStubbed?{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__stubbed-badge",class:{"vf3-comment__stubbed-badge--reply":t.isReply}},[t.isDisabledStub?n("disabled-badge"):t.isMutedStub?n("muted-badge"):t.isDeletedStub?n("deleted-badge"):t._e()],1),t._v(" "),n("content-actions",{staticClass:"vf-comment__bottom-actions",attrs:{"is-stub":"",comment:t.comment,"is-entered":t.isEntered},on:{replies:function(e){return t.$emit("replies",e)}}})]},proxy:!0}:{key:"right",fn:function(){return[n("div",{staticClass:"vf3-comment__header"},[n("post-details",{attrs:{"content-uuid":t.comment.content_uuid,"user-uuid":t.user.uuid,"is-from-user":!0,"is-pinned":t.comment.is_pinned,"is-reply":t.isReply,"reply-name":t.replyName,"is-reply-to-edited-post":t.isReplyToEditedPost,"has-author-badge":t.isOwner(t.user.uuid),"custom-badges":t.user.custom_badges,"is-entered":t.isEntered,"is-reply-to-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}),t._v(" "),n("secondary-actions",{directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__secondary-actions",attrs:{comment:t.comment,"is-entered":t.isEntered,"is-content-removal-enabled":t.isContentRemovalEnabled},on:{edit:t.handleEdit}})],1),t._v(" "),t.isCurrentUserModOrAdmin?n("moderation-actions",{attrs:{comment:t.comment}}):t._e(),t._v(" "),n("content-editor",{ref:"contentEditor",staticClass:"vf-comment__content-editor",attrs:{"is-rich-text-enabled":!1,"content-uuid":t.comment.content_uuid,"content-container-uuid":t.comment.content_container_uuid,status:t.editorStatus,"is-focused":!t.isEditorStatusStatic,"character-limit":t.contentContainerSettings.maximum_content_length},on:{"content-update":t.handleContentUpdate,"request-submit":t.handleSubmitEdit},scopedSlots:t._u([{key:"content-start",fn:function(){return[t.hasDeletedBadge?n("deleted-badge",{staticClass:"vf-comment__content-badge"}):t.hasBannedBadge?n("banned-badge",{staticClass:"vf-comment__content-badge",attrs:{"is-ghost":t.hasGhostBannedBadge}}):t.hasDisabledBadge?n("disabled-badge",{staticClass:"vf-comment__content-badge vf-comment__content-badge--disabled",attrs:{"has-reason":""}}):t.hasPendingBadge?n("pending-badge",{staticClass:"vf-comment__content-badge"}):t._e()]},proxy:!0},t.hasEditedBadge?{key:"content-end",fn:function(){return[n("edited-badge",{staticClass:"vf-comment__edited-badge"})]},proxy:!0}:null],null,!0)}),t._v(" "),n("content-actions",{directives:[{name:"show",rawName:"v-show",value:t.isEditorStatusStatic,expression:"isEditorStatusStatic"}],staticClass:"vf-comment__bottom-actions",attrs:{comment:t.comment,"is-entered":t.isEntered,"is-stub":t.isBadged&&!t.hasEditedBadge},on:{reply:function(e){return t.$emit("reply",e)},replies:function(e){return t.$emit("replies",e)}}})]},proxy:!0}],null,!0)})],1)])}),[],!1,null,"02549860",null).exports),Kt=n(623);function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){Qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt={data:function(){return{isExpanded:!1,isFocused:!1}},inject:[f.a,f.e,f.d],props:{threadUuid:N.a.uuid.isRequired,isReply:N.a.bool.def(!1),locationInThread:ct.b.isRequired,threadPalette:ct.a.isRequired,isReplyToClickable:N.a.bool},beforeCreate:function(){this.storeAction=i.o},computed:Zt({},Object(l.c)({getSettings:r.R,contentByUuid:r.P,isActiveReplyThread:r.Gb}),{localThreadLocation:function(){return this.isExpanded?nt.c.FIRST:this.locationInThread},localThreadPalette:function(){return this.isExpanded?this.PALETTES.LIGHT_PRIMARY:this.threadPalette},maximumCommentLength:function(){return this.getSettings(this.content.content_container_uuid).maximum_content_length},content:function(){return this.contentByUuid(this.threadUuid)},commentId:function(){return Object(h.b)(this.THREAD_NAMESPACE,this.content.content_uuid)}}),methods:Zt({},Object(l.b)({addActiveReplyThread:i.a}),{expandForm:function(){var t=this;this.isExpanded=!0,this.$nextTick((function(){Object(y.a)(".vf-content-editor-form__textarea",t.$el).focus()}))},repliesClicked:function(){0!==this.content.total_replies&&this.setReplyThread()},setReplyThread:function(){var t,e=this.content,n=e.content_uuid,i=e.thread_uuid;if(this.isReply){var r=Object(h.a)(this.THREAD_NAMESPACE,i);t=this.$el.offsetTop+Object(y.a)(r).parentElement.parentElement.offsetTop-p.c}else t=this.$el.parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:n,offset_top:t,mode:b.REPLY_THREAD_MODES.REPLIES})},focusedIn:function(){this.isExpanded=!0,this.isFocused=!0,this.$emit("focusin")},focusRemoved:function(){this.isFocused=!1,this.isExpanded=!1,this.$emit("remove-focus")},removeFocus:function(){this.$refs.replyForm.removeFocus()},replyToClicked:function(){var t=this;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Tb),{content_container_uuid:this.content.content_container_uuid,thread_uuid:this.content.parent_uuid,selected_content_uuids:[this.content.content_uuid],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return t.updateReplyThread(t.content.parent_uuid,t.content.thread_uuid)}))},updateReplyThread:function(t,e){this.isActiveReplyThread(this.content.content_container_uuid)?this.$store.commit(Q.Yc,{uuid:this.content.content_container_uuid,mode:b.REPLY_THREAD_MODES.REPLY_PARENT}):this.openReplyThread(t,e)},openReplyThread:function(t,e){var n=Object(h.a)(this.THREAD_NAMESPACE,e),i=Object(y.a)(n).parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:b.REPLY_THREAD_MODES.REPLY_PARENT})}}),components:{comment:Wt,replyForm:Kt.a}},te=(n(1159),Object($.a)(Xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-form",{ref:"replyForm",staticClass:"vf3-content-with-reply-form",class:{"vf3-content-with-reply-form--is-reply":t.isReply},attrs:{id:t.commentId,"replying-to":t.content,"store-action":t.storeAction,"is-expanded":t.isExpanded,"character-limit":t.maximumCommentLength},on:{focusin:t.focusedIn,"remove-focus":t.focusRemoved,"clear-reply":function(e){t.isExpanded=!1}}},[n("comment",{ref:"comment",attrs:{comment:t.content,"is-reply":t.isReply,"location-in-thread":t.localThreadLocation,"thread-palette":t.localThreadPalette,"is-reply-to-clickable":t.isReplyToClickable},on:{reply:t.expandForm,replies:t.repliesClicked,"reply-to-clicked":t.replyToClicked}})],1)}),[],!1,null,"3e038b59",null).exports),ee=n(107),ne=n(887),ie=n(888),re=n(889);function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ae={props:{contentContainerUuid:N.a.uuid.isRequired,threads:N.a.array.isRequired,itemClass:N.a.string.isRequired,isExpanded:N.a.bool.def(!1),enablePromos:N.a.bool.def(!1),hasMoreAvailable:N.a.bool},created:function(){this.widgetTag=u.c.COMMENTS,this.HEADER_HEIGHT=p.c,this.createAction=i.o,this.fetchRepliesAction=i.cb,this.fetchSelectedAction=i.vb,this.contentContainerType=ee.b,this.commentWithReplyForm=te},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){se(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({widgetSettingsByUuid:r.td,livecommentsSettingsByUuid:r.R}),{limit:function(){return this.widgetSettingsByUuid(this.contentContainerUuid).pagination_reply_limit},maximumContentLength:function(){return this.settings.maximum_content_length},settings:function(){return this.livecommentsSettingsByUuid(this.contentContainerUuid)}}),methods:{hasBorder:function(t){return this.hasMoreAvailable||t!==this.threads.length-1}},components:{promoContainer:re.a,topLevelThread:ie.a,conversationsList:ne.a}},ce=Object($.a)(ae,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("conversations-list",{attrs:{"has-no-separator":"","has-height-transition":""}},t._l(t.threads,(function(e,i){return n("li",{key:e,class:t.itemClass},[n("top-level-thread",{attrs:{"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"thread-uuid":e,"header-height-px":t.HEADER_HEIGHT,"store-action":t.createAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"is-expanded":t.isExpanded,"has-border":t.hasBorder(i)}}),t._v(" "),n("promo-container",{staticClass:"vf3-conversations-list__promo",attrs:{"widget-tag":t.widgetTag,enabled:t.enablePromos,index:i,"thread-uuid":e,"content-container-type":t.contentContainerType}})],1)})),0)}),[],!1,null,null,null).exports,ue=n(878),le=n(745),de={inject:[f.b],components:{vfNoDataIcon:le.a,announceLayout:ue.a}},fe=(n(1160),Object($.a)(de,(function(){var t=this.$createElement,e=this._self._c||t;return e("announce-layout",{staticClass:"vf-empty-comments",attrs:{title:this.$i18n("conversations.announce.empty.title.comments"),size:this.SIZES.SMALL},scopedSlots:this._u([{key:"header",fn:function(){return[e("div",{staticClass:"vf-empty-comments__icon-wrapper"},[e("vf-no-data-icon",{staticClass:"vf-icon-large vf-empty-comments__icon"})],1)]},proxy:!0}])})}),[],!1,null,"5de0c1e2",null).exports);function he(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _e,ge={props:{thread:N.a.object.isRequired,contentContainer:N.a.object.isRequired,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1),disableMentions:N.a.bool.def(!1),hasPreview:N.a.bool},inject:[f.e,f.d],data:function(){return{isTopIntersecting:!1,isBelowPinnedIntersecting:!1}},created:function(){this.PALETTES=et.a,this.HEADER_HEIGHT=p.c,this.BOTTOM=it.BOTTOM,this.createAction=i.o,this.fetchAction=i.vb,this.fetchRepliesAction=i.cb,this.fetchDirectRepliesAction=i.bb,this.fetchSelectedAction=i.vb,this.commentWithReplyForm=te,this.isJumpyBrowser=rt.d},mounted:function(){var t=this;Object(E.d)().then((function(){t.topIntersectionObserver=Object(E.a)(t.$refs.top,t.topObserverHandler,{rootMargin:"-50px"}),t.belowPinnedIntersectionObserver=Object(E.a)(t.$refs.belowPinned,t.belowPinnedObserverHandler,{rootMargin:"-50px"})}))},beforeDestroy:function(){this.topIntersectionObserver&&this.topIntersectionObserver.unobserve(this.$refs.top),this.belowPinnedIntersectionObserver&&this.belowPinnedIntersectionObserver.unobserve(this.$refs.belowPinned)},computed:me({},Object(l.c)({interactions:r.Fb,activeReplyThreadByContainerUuid:r.a,allMentionNotifications:r.k,mentionNotificationByUuid:r.kc,contentByUuid:r.P,siteSettings:r.Dc,livecommentsSettingsByUuid:r.R,widgetSettingsByUuid:r.td,isOffline:r.Pb}),{isEmpty:function(){return 0===this.thread.visible_content.length},limit:function(){return this.widgetSettingsByUuid(this.contentContainer.content_container_uuid).pagination_reply_limit},pinnedThreads:function(){return this.thread.pinned_content},unPinnedThreads:function(){return this.thread.unpinned_content},visibleThreads:function(){return this.thread.visible_content},maximumContentLength:function(){return this.settings.maximum_content_length},below:function(){return this.newCommentsByPlacement(nt.b.BELOW)},unreadComments:function(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.bd)](this.contentContainer.content_container_uuid)},notOwnUnreadComments:function(){var t=this;return this.unreadComments.filter((function(e){var n=e.content_uuid;return!t.$store.getters[r.U](n)}))},newTopLevelAbove:function(){return this.newCommentsByPlacement(nt.b.ABOVE)},allContainerMentionNotifications:function(){if(this.disableMentions)return[];var t=this.contentContainer.content_container_uuid;return this.allMentionNotifications.filter((function(e){return e.content_container_uuid===t}))},shouldPreserveTopRTBarHeight:function(){return rt.d&&(this.allContainerMentionNotifications.length>0||this.newTopLevelAbove.length>0)},mentionsAbove:function(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,nt.b.ABOVE)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return n.time-e.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?i.time-r.time:0})).map((function(t){return t.content_uuid}))},mentionsBelow:function(){var t=this;return this.allContainerMentionNotifications.filter((function(e){return t.filterMentionsByPlacement(e,nt.b.BELOW)})).sort((function(e,n){if(e.thread_uuid===n.thread_uuid)return e.time-n.time;var i=t.contentByUuid(e.thread_uuid),r=t.contentByUuid(n.thread_uuid);return i&&r?r.time-i.time:0})).map((function(t){return t.content_uuid}))},isTopRTBarMention:function(){return this.mentionsAbove.length>0},topRTBarCount:function(){return this.isTopRTBarMention?this.mentionsAbove.length:this.newTopLevelAbove.length},topRTBarLabel:function(){return this.isTopRTBarMention?"conversations.realtime_bar.label.mentions":"conversations.realtime_bar.label.comments"},rtBarTopProps:function(){return this.isBackOnline?{isVisible:!0,labelText:this.$i18n("conversations.reload"),showActionButton:!1,palette:et.a.ACCENT,disabled:this.isOffline}:this.isTopRTBarMention?{isVisible:!0,labelText:this.$i18n("conversations.realtime_bar.label.mentions",{count:this.topRTBarCount}),showActionButton:!1,palette:et.a.MENTION}:{isVisible:this.topRTBarCount>0&&!(rt.d&&this.pinnedThreads.length>0),labelText:this.$i18n("conversations.realtime_bar.label.comments",{count:this.topRTBarCount}),actionText:this.$i18n("conversations.realtime_bar.skip_to_top"),showActionButton:!this.isTopIntersecting,palette:et.a.ACCENT}},showTopRTBarBelowPinned:function(){return this.pinnedThreads.length>0&&!this.isTopRTBarMention&&this.topRTBarCount>0&&rt.d},showBottomRTBar:function(){return this.mentionsBelow.length>0},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.contentContainer.content_container_uuid)},shouldShowReplyThread:function(){return this.activeReplyThread.thread_uuid&&this.isTabActive},realtimeContentCount:function(){return this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Sc)](this.contentContainer.content_container_uuid)},arePromosEnabled:function(){return this.siteSettings[tt.a]!==X.a.NONE},settings:function(){return this.livecommentsSettingsByUuid(this.contentContainer.content_container_uuid)},isBackOnline:function(){return this.contentContainer.is_stale}}),methods:me({},Object(l.b)({addActiveReplyThread:i.a,reloadContainer:i.yc}),{topObserverHandler:function(t){this.isTopIntersecting=t[0].isIntersecting,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(Q.ad),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:t[0].isIntersecting})},belowPinnedObserverHandler:function(t){var e=he(t,1)[0].isIntersecting;this.isBelowPinnedIntersecting=e,this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(Q.ad),{thread_uuid:this.contentContainer.content_container_uuid,is_in_view:e})},newCommentsByPlacement:function(t){return this.notOwnUnreadComments.filter((function(e){return e.place===t}))},handleRtBarTopClick:function(){var t=this;if(this.isBackOnline){var e=this.contentContainer.content_container_uuid;Object(L.f)(this.$store.commit,v.b,e),this.reloadContainer(e).then((function(){Object(L.g)(t.$store.commit,v.b,e)})).catch((function(){Object(L.e)(t.$store.commit,v.b,e,"",1/0)}))}else this.isTopIntersecting?this.skipToTop():this.goToNextUnseenTop()},goToNextUnseenTop:function(){var t=this.isTopRTBarMention,e=this.nextUnseen({place:nt.b.ABOVE,isMention:t});this.findElement(e,t)},goToNextUnseenBottom:function(){var t=this.nextUnseen({place:nt.b.BELOW,isMention:!0});this.findElement(t,!0)},findElement:function(t,e){if(e){var n=Object(h.a)(this.THREAD_NAMESPACE,t);return Object(y.a)(n)?this.goToElement(t):this.initializeAndFetchThread(t)}return this.goToElement(t)},initializeAndFetchThread:function(t){var e=this,n=this.$store.getters[r.ad](t),o=n.target_uuid,s=n.thread_uuid;return this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(i.Tb),{content_container_uuid:this.contentContainer.content_container_uuid,thread_uuid:o,selected_content_uuids:[t],fetchAction:this.THREAD_FETCH_ACTION}).then((function(){return e.openReplyThread(o,s)}))},openReplyThread:function(t,e){var n=Object(h.a)(this.THREAD_NAMESPACE,e),i=Object(y.a)(n).parentElement.parentElement.offsetTop-p.c;return this.addActiveReplyThread({thread_uuid:t,offset_top:i,mode:b.REPLY_THREAD_MODES.MENTION})},skipToTop:function(){if(this.realtimeContentCount){var t=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(Q.yb),{thread_uuid:t,limit:this.limit})}this.goToTop()},goToElement:function(t){var e=Object(h.a)(this.THREAD_NAMESPACE,t),n=Object(y.a)(e);n&&(n.scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.d,Object(y.a)("body").scrollTop-=p.d,this.$store.commit(Q.eb,t))},goToTop:function(){var t=this.pinnedThreads.length>0?this.$refs.belowPinned:this.$refs.top;t&&(t.scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.e,Object(y.a)("body").scrollTop-=p.e)},nextUnseen:function(t){var e=t.place;if(t.isMention)return e===nt.b.ABOVE?this.mentionsAbove[0]:this.mentionsBelow[0];if(this.realtimeContentCount){var n=this.contentContainer.content_container_uuid;this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(Q.yb),{thread_uuid:n,limit:1})}return this.newTopLevelAbove.length?this.newTopLevelAbove[0].content_uuid:{}},filterMentionsByPlacement:function(t,e){var n=t.content_uuid,i=t.thread_uuid;return this.visibleThreads.includes(i)?this.$store.getters["".concat(this.THREAD_NAMESPACE,"/").concat(r.Pc)](i).visible_content.includes(n)?this.contentByUuid(n).place===e:this.contentByUuid(i).place===e:this.unreadComments.find((function(t){return t.thread_uuid===i}))?e===nt.b.ABOVE&&t:e===nt.b.BELOW&&t}}),components:{topTypingIndicator:at.a,realtimeBar:ot.a,replyThread:st.a,heightTransition:K.a,emptyComments:fe,commentsList:ce}},ye=(n(1161),Object($.a)(ge,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-comments"},[n("div",{ref:"top"}),t._v(" "),n("div",{staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",t._b({staticClass:"all-comments__top-rt-bar",attrs:{"aria-hidden":(!t.rtBarTopProps.isVisible).toString()},on:{"realtime-main-action":t.handleRtBarTopClick,"realtime-arrow-action":t.skipToTop}},"realtime-bar",t.rtBarTopProps,!1))],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf-conversations-list__pinned-comments",class:{"vf-conversations-list__pinned-comments--empty":0===t.pinnedThreads.length},attrs:{"item-class":"vf3-conversations-list--pinned--list","content-container-uuid":t.contentContainer.content_container_uuid,threads:t.pinnedThreads}})],1),t._v(" "),n("div",{ref:"belowPinned"}),t._v(" "),t.isJumpyBrowser?n("div",{staticClass:"all-comments__top-rt-bar-container",class:{"all-comments__top-rt-bar-container--preserve":t.shouldPreserveTopRTBarHeight}},[n("realtime-bar",{staticClass:"all-comments__top-rt-bar",attrs:{"is-visible":t.showTopRTBarBelowPinned,"label-text":t.$i18n("conversations.realtime_bar.label.comments",{count:t.topRTBarCount}),"action-text":t.$i18n("conversations.realtime_bar.skip_to_top"),palette:t.PALETTES.ACCENT,"show-action-button":!t.isBelowPinnedIntersecting,"aria-hidden":(!t.showTopRTBarBelowPinned).toString()},on:{"realtime-main-action":function(e){t.isBelowPinnedIntersecting?t.skipToTop():t.goToNextUnseenTop()},"realtime-arrow-action":t.skipToTop}})],1):t._e(),t._v(" "),n("top-typing-indicator",{staticClass:"all-comments__typing-indicator",attrs:{"is-typing":t.interactions(t.contentContainer.content_container_uuid).isTyping}}),t._v(" "),n("height-transition",[t.isEmpty?n("empty-comments",{staticClass:"all-comments__empty-comments"}):t._e()],1),t._v(" "),n("height-transition",[t.isEmpty?t._e():n("comments-list",{staticClass:"vf3-conversations-list--comments",attrs:{"item-class":"vf3-conversations-list--comments--list","is-expanded":t.hasPreview,"content-container-uuid":t.contentContainer.content_container_uuid,threads:t.unPinnedThreads,"enable-promos":t.arePromosEnabled,"has-more-available":t.hasMoreAvailable}})],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowReplyThread,expression:"shouldShowReplyThread"}],staticClass:"all-comments__reply-thread-overlay"})]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.shouldShowReplyThread?n("reply-thread",{style:{top:t.activeReplyThread.offset_top+"px"},attrs:{limit:t.limit,"create-action":t.createAction,"fetch-action":t.fetchAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"content-component":t.commentWithReplyForm,"active-reply-thread":t.activeReplyThread},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):t._e()],1),t._v(" "),n("realtime-bar",{staticClass:"bottom-rt-bar",attrs:{location:t.BOTTOM,"is-visible":t.showBottomRTBar,"label-text":t.$i18n("conversations.realtime_bar.label.mentions",{count:t.mentionsBelow.length}),palette:t.PALETTES.MENTION,"show-action-button":!1},on:{"realtime-main-action":t.goToNextUnseenBottom}})],1)}),[],!1,null,"16f0986f",null).exports);function Oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ee,Ce={props:{contentContainer:N.a.object.isRequired,thread:N.a.object.isRequired,isReady:N.a.bool.isRequired,isRefetchingComments:N.a.bool.isRequired,reloadStatus:N.a.string,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1)},inject:[f.a,f.b],provide:(_e={},Oe(_e,f.e,s.a),Oe(_e,f.d,i.vb),_e),components:{threadTab:ye,vfSpinningLoader:Z.a,vfExclamationMarkIcon:J.a}},Te=(n(1162),Object($.a)(Ce,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"3b097a72",null).exports);function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var je={props:{contentContainer:N.a.object.isRequired,thread:N.a.object.isRequired,isReady:N.a.bool.isRequired,isRefetchingComments:N.a.bool.isRequired,reloadStatus:N.a.string,hasMoreAvailable:N.a.bool,isTabActive:N.a.bool.def(!1)},inject:[f.a,f.b],provide:(Ee={},Se(Ee,f.e,s.b),Se(Ee,f.d,i.eb),Ee),components:{threadTab:ye,vfSpinningLoader:Z.a,vfExclamationMarkIcon:J.a}},Ae=(n(1163),Object($.a)(je,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady?n("thread-tab",{attrs:{"disable-mentions":"",thread:t.thread,"content-container":t.contentContainer,"has-more-available":t.hasMoreAvailable,"is-tab-active":t.isTabActive,"has-preview":!1},on:{"is-reply-thread-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}}):n("div",{staticClass:"vf3-comments__loader vf-flex vf-centered"},[t.isRefetchingComments?n("vf-spinning-loader",{attrs:{size:t.SIZES.MEDIUM,palette:t.PALETTES.ACCENT,status:t.reloadStatus}}):n("vf-exclamation-mark-icon",{attrs:{circle:"outline",size:t.SIZES.MEDIUM}})],1)}),[],!1,null,"b8a6e6b2",null).exports);function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(n),!0).forEach((function(e){Ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ue=Object(O.b)("settings-"),De={props:{thread:N.a.object.isRequired,featuredThread:N.a.object.isRequired,contentContainer:N.a.object.isRequired,sectionUuid:N.a.uuid.isRequired,user:N.a.object.isRequired},inject:[f.a,f.b],beforeCreate:function(){this.settingsAreaID=Ue(),this.storeAction=i.n},created:function(){this.initialTab=this.featuredThread.visible_content.length>=this.widgetSettings.featured_tab_active_threshold&&!this.deeplinkUuid?p.a.FEATURED:p.a.ALL_COMMENTS,this.handleTabTo(this.initialTab)},mounted:function(){this.$publish(a.e.CHANNEL,a.e.EVENTS.LOADED,this.$el),this.initDom(),this.deeplinkUuid&&this.initializeFocusView(),this.fetchTrendingArticlesComponent()},beforeDestroy:function(){this.observer&&this.observer.unobserve(this.$refs.tabbedNavTop)},data:function(){return{hasStickiedTabs:!1,isLoadingNewComments:!1,newCommentsHasError:!1,isReplyThreadHeaderSticky:!1,areSettingsOpenedByUser:!1,currentTab:p.a.ALL_COMMENTS,settingsComponent:null,trendingArticlesComponent:null,initialTab:null}},computed:Ne({},Object(l.c)({isCommentingExpired:r.vb,deeplinkUuid:r.gb,currentUser:r.eb,errorStatus:r.nb,getSettings:r.R,getWidgetSettings:r.td,isCurrentUserModOrAdmin:r.Mb,siteSettings:r.Dc,allCommentsCount:r.g,getFeaturedCommentsCount:r.ib}),{contentContainerUuid:function(){return this.contentContainer.content_container_uuid},settings:function(){return this.getSettings(this.contentContainerUuid)},widgetSettings:function(){return this.getWidgetSettings(this.contentContainerUuid)},areSettingsVisible:function(){return this.isCurrentUserModOrAdmin&&null!==this.settingsComponent&&this.areSettingsOpenedByUser},featuredCommentsCount:function(){return this.getFeaturedCommentsCount(this.contentContainerUuid)},tabs:function(){return[{name:p.a.FEATURED,text:this.$i18n("comments.navigation.featured"),hasNewContent:!1,count:this.featuredCommentsCount,ariaLabel:this.$i18n("comments.navigation.featured_tab_label",{count:this.featuredCommentsCount}),test:this.featuredCommentsCount>0},{name:p.a.ALL_COMMENTS,text:this.$i18n("comments.navigation.all_comments"),hasNewContent:!1,count:this.allCommentsCount(this.contentContainerUuid),ariaLabel:this.$i18n("comments.navigation.all_comments_tab_label",{count:this.allCommentsCount(this.contentContainerUuid)}),test:!0}]},filteredTabs:function(){return this.tabs.filter((function(t){return t.test}))},isReady:function(){return this.thread&&!this.isRefetchingComments&&!this.didRefetchingFail},newCommentPlaceholder:function(){var t=this.thread.visible_content.length,e=t>0?this.$i18n("comments.new_comment.join_placeholder"):this.$i18n("comments.new_comment.start_placeholder"),n=t>0?this.$i18n("comments.new_comment.join_placeholder_with_name",{name:this.currentUser.name}):this.$i18n("comments.new_comment.start_placeholder_with_name",{name:this.currentUser.name});return Object(C.D)(this.currentUser)?n:e},reloadStatus:function(){return this.errorStatus(this.contentContainerUuid,v.b)},isRefetchingComments:function(){return this.reloadStatus===m.a.PENDING},didRefetchingFail:function(){return this.reloadStatus===m.a.ERROR},areTrendingArticlesVisible:function(){return null!==this.trendingArticlesComponent},areMoreCommentsAvailable:function(){switch(this.currentTab){case p.a.ALL_COMMENTS:return this.thread.more_available;case p.a.FEATURED:return this.featuredThread.more_available;default:return!1}},isAllCommentsTabActive:function(){return this.currentTab===p.a.ALL_COMMENTS},isFeaturedCommentsTabActive:function(){return this.currentTab===p.a.FEATURED}}),methods:Ne({},Object(l.b)({fetchAllComments:i.kb,fetchFeaturedComments:i.eb,addActiveReplyThread:i.a,initializeThread:"".concat(s.a,"/").concat(i.Tb)}),{toggleSettings:function(){var t=this;this.hasStickiedTabs?(this.areSettingsOpenedByUser=!0,this.$nextTick().then((function(){t.$refs.settings.$el.scrollIntoView()}))):this.areSettingsOpenedByUser=!this.areSettingsOpenedByUser},initDom:function(){var t=this;g.a.add(Object(y.a)(".vf3-comments__tabbed-nav .vf-tabbed-nav",this.$el)),Object(E.d)().then((function(){t.observer=Object(E.a)(t.$refs.tabbedNavTop,t.handleObserved,{})}))},initializeFocusView:function(){var t=this;this.$refs.tabbedNavigation.selectTab(p.a.ALL_COMMENTS);var e=this.deeplinkUuid,n=this.contentContainer.content_container_uuid;return this.$store.dispatch(i.vb,{content_container_uuid:n,content_uuids:e}).then((function(){if(!t.$store.getters[r.Kb](e))return Promise.resolve();var o,s,a=t.$store.getters[r.P](e),c=a.thread_uuid===n;return c?(s=e,o=[]):(s=a.parent_uuid,o=[e]),t.initializeThread({content_container_uuid:n,thread_uuid:s,selected_content_uuids:o,fetchAction:i.vb}).then((function(){var n=c?e:a.thread_uuid,i=t.findElementOffset(n);return t.addActiveReplyThread({thread_uuid:s,offset_top:i,mode:b.REPLY_THREAD_MODES.REPLIES})}))}))},findElementOffset:function(t){var e=Object(h.a)(s.a,t);return Object(y.a)(e).parentElement.parentElement.offsetTop-p.c},handleObserved:function(t){var e=we(t,1)[0].isIntersecting;this.hasStickiedTabs=!e},handleLoadMore:function(){var t,e=this;switch(this.isLoadingNewComments=!0,this.newCommentsHasError=!1,this.currentTab){case p.a.ALL_COMMENTS:t=this.fetchAllComments(this.contentContainerUuid);break;case p.a.FEATURED:t=this.fetchFeaturedComments(this.contentContainerUuid);break;default:t=Promise.resolve()}t.catch((function(){e.newCommentsHasError=!0})).then((function(){e.isLoadingNewComments=!1}))},setReplyThreadStickyHeader:function(t){this.isReplyThreadHeaderSticky=t},handleTabTo:function(t){this.currentTab=t,this.setScrollToTop()},fetchSettingsComponent:function(){var t=this;Promise.all([n.e(0),n.e(6),n.e(28)]).then(n.bind(null,1487)).then((function(e){t.settingsComponent=e.default}))},fetchTrendingArticlesComponent:function(){var t=this;this.siteSettings.enable_comments_trending_articles&&n.e(29).then(n.bind(null,1488)).then((function(e){t.trendingArticlesComponent=e.default}))},redirectToAllCommentsTab:function(){this.currentTab!==p.a.ALL_COMMENTS&&this.$refs.tabbedNavigation.selectTab(p.a.ALL_COMMENTS)},setScrollToTop:function(){if(this.hasStickiedTabs){var t=Object(y.a)("nav",this.$refs.tabbedNavigation.$el).offsetTop-document.scrollingElement.scrollTop;document.scrollingElement.scrollTop=this.$refs.tabbedNavTop.offsetTop-t}}}),watch:{deeplinkUuid:function(){this.initializeFocusView()},isRefetchingComments:function(t){t&&this.$refs.commentHeader.$el.getBoundingClientRect().top<0&&(this.$refs.commentHeader.$el.scrollIntoView(!0),Object(y.a)("html").scrollTop-=p.e,Object(y.a)("body").scrollTop-=p.e)},isCurrentUserModOrAdmin:{immediate:!0,handler:function(t){t?this.fetchSettingsComponent():this.areSettingsOpenedByUser=!1}}},provide:Ie({},f.e,s.a),components:{conversationsFooter:Y.a,vfTabbedNavigation:S.a,heightTransition:K.a,commentHeader:k,commentNavRight:z,navTabButton:A.a,postForm:T.a,loadMore:W.a,allCommentsWrapper:Te,vfStatusMessage:V.a,featuredCommentsWrapper:Ae,vfButton:j.a}},$e=(n(1164),Object($.a)(De,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"vf3-comments"},[n("comment-header",{ref:"commentHeader",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid}}),t._v(" "),n("post-form",{staticClass:"v3-comments__post-form",attrs:{placeholder:t.newCommentPlaceholder,user:t.user,"content-container-uuid":t.contentContainerUuid,"store-action":t.storeAction,"is-rich-text-enabled":!1,"character-limit":t.settings.maximum_content_length,"is-expired":t.isCommentingExpired(t.contentContainerUuid),"expiry-notice":t.$i18n("conversations.content_container.expiry_notice.comments")},on:{"on-content-created":t.redirectToAllCommentsTab}}),t._v(" "),n("height-transition",[t.settings.is_hidden&&t.isCurrentUserModOrAdmin&&!t.areSettingsVisible?n("vf-status-message",{attrs:{type:"warning"},scopedSlots:t._u([{key:"vf-status-message-content",fn:function(){return[t._v("\n                "+t._s(t.$i18n("comments.settings.hidden"))+"\n            ")]},proxy:!0}],null,!1,837348511)}):t._e()],1),t._v(" "),n("height-transition",[t.areSettingsVisible?n(t.settingsComponent,{ref:"settings",tag:"component",attrs:{id:t.settingsAreaID,"content-container-uuid":t.contentContainerUuid}}):t._e()],1),t._v(" "),n("div",{ref:"tabbedNavTop"}),t._v(" "),n("vf-tabbed-navigation",{ref:"tabbedNavigation",staticClass:"vf3-comments__tabbed-nav",class:{"vf3-comments__tabbed-nav--stickied":t.hasStickiedTabs,"vf3-comments__tabbed-nav--overlayed":t.isReplyThreadHeaderSticky},attrs:{type:"dropdown",tabs:t.filteredTabs,"initial-tab":t.initialTab,"nav-label":t.$i18n("comments.heading")},on:{"tab-to":t.handleTabTo},scopedSlots:t._u([{key:"nav-right",fn:function(){return[n("comment-nav-right",{staticClass:"vf3-comments__tabbed-nav__right",attrs:{"content-container":t.contentContainer,"tab-name":t.currentTab,"settings-id":t.settingsAreaID,"are-settings-expanded":t.areSettingsVisible&&t.areSettingsOpenedByUser&&!t.hasStickiedTabs},on:{"settings-toggled":t.toggleSettings}})]},proxy:!0},{key:"button",fn:function(e){var i=e.tab;return[n("nav-tab-button",t._b({attrs:{"is-inside-trigger":i.isInsideTrigger,"is-inside-dropdown":i.isInsideDropdown}},"nav-tab-button",i,!1)),t._v(" "),i.isInsideTrigger?n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.filter_label"))+"\n            ")]):t._e()]}},{key:"all",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.all_comments"))+"\n            ")]),t._v(" "),n("all-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.thread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isAllCommentsTabActive},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader}})]},proxy:!0},{key:"featured",fn:function(){return[n("h3",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.featured_tab_heading"))+"\n            ")]),t._v(" "),n("p",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.$i18n("comments.navigation.featured_tab_content_description"))+"\n            ")]),t._v(" "),n("featured-comments-wrapper",{attrs:{"is-ready":t.isReady,thread:t.featuredThread,"content-container":t.contentContainer,"is-refetching-comments":t.isRefetchingComments,"reload-status":t.reloadStatus,"has-more-available":!1,"is-tab-active":t.isFeaturedCommentsTabActive},on:{"is-reply-thread-header-sticky":t.setReplyThreadStickyHeader}})]},proxy:!0}])}),t._v(" "),t.isReady?n("div",{staticClass:"vf3-comments__bottom-action"},[t.areMoreCommentsAvailable?n("load-more",{attrs:{"is-loading":t.isLoadingNewComments,"has-error":t.newCommentsHasError,"error-aria-label":t.$i18n("conversations.load_more.error_aria.comments")},on:{"load-more":t.handleLoadMore}},[n("span",[t._v(t._s(t.$i18n("conversations.load_more.label.comments")))])]):t.isFeaturedCommentsTabActive?n("vf-button",{staticClass:"vf-label-text",attrs:{"is-cta":"","is-inverted":"","is-full-width":"",size:t.SIZES.SMALL,palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.redirectToAllCommentsTab(e)}}},[t._v("\n            "+t._s(t.$i18n("conversations.view_all.comments"))+"\n        ")]):t._e()],1):t._e(),t._v(" "),t.areTrendingArticlesVisible?n(t.trendingArticlesComponent,{tag:"component",attrs:{"content-container-uuid":t.contentContainerUuid}}):t._e(),t._v(" "),n("conversations-footer",{attrs:{product:"LiveCommenting","section-uuid":t.sectionUuid,"aria-label":t.$i18n("comments.heading")}})],1)}),[],!1,null,"56c3b228",null).exports);function ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(n),!0).forEach((function(e){Le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Be={props:{sectionUuid:N.a.uuid.isRequired,commentsUuid:N.a.uuid.isRequired,dataVfId:N.a.string.isRequired},data:function(){return{commentsBaseWithActivity:Object(d.a)($e,u.c.COMMENTS,this.dataVfId,50,50)}},mounted:function(){this.rtSubscribe({container_uuid:[this.commentsUuid],section_uuid:[this.sectionUuid],message_type:[o.b.LIVECOMMENT,o.b.LIVECOMMENT_POST,o.b.REPLY_TO_LIVECOMMENT_POST_DEPRECATED,o.b.INTERACTION],action:[o.a.CREATED,o.a.UPDATED,o.a.VISIBLE,o.a.SPAM,o.a.DISABLED,o.a.FLAGGED,o.a.FLAGS_CLEARED,o.a.DELETED,o.a.LIKED,o.a.UNLIKED,o.a.DISLIKED,o.a.UNDISLIKED,o.a.STARTED_TYPING,o.a.PICKED,o.a.UNPICKED,o.a.PINNED,o.a.UNPINNED]}),this.initializeMentionNotifications(),this.$subscribe(a.C.CHANNEL,a.C.EVENTS.LOADED,this.onRealtimeUserChange)},computed:xe({},Object(l.c)({currentUser:r.eb,getContentContainer:r.bc,getSettings:r.R,getThreadByUuid:"".concat(s.a,"/").concat(r.Vc),getFeaturedThreadByUuid:"".concat(s.b,"/").concat(r.Vc),isCurrentUserModOrAdmin:r.Mb}),{settings:function(){return this.getSettings(this.contentContainerUuid)},contentContainer:function(){return this.getContentContainer(this.commentsUuid)||{}},contentContainerUuid:function(){return this.contentContainer.content_container_uuid},isWidgetVisible:function(){return!(this.settings&&this.settings.is_hidden)||this.isCurrentUserModOrAdmin},isReady:function(){return this.contentContainer&&this.contentContainer.hasOwnProperty("content_container_uuid")&&this.thread&&this.featuredThread},thread:function(){return this.getThreadByUuid(this.commentsUuid)},featuredThread:function(){return this.getFeaturedThreadByUuid(this.commentsUuid)}}),methods:xe({},Object(l.b)({fetchMentionNotificationsByContainerUuid:i.mb}),{fetchMentionNotifications:function(){this.fetchMentionNotificationsByContainerUuid(this.commentsUuid)},onRealtimeUserChange:function(){this.initializeMentionNotifications()},initializeMentionNotifications:function(){this.currentUser.uuid!==c.b&&this.fetchMentionNotifications()}})},Me=Object($.a)(Be,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReady&&t.isWidgetVisible?n(t.commentsBaseWithActivity,{tag:"component",attrs:{"content-container":t.contentContainer,"section-uuid":t.sectionUuid,user:t.currentUser,thread:t.thread,"featured-thread":t.featuredThread,"data-vf-id":t.dataVfId}}):t._e()}),[],!1,null,null,null);e.default=Me.exports},369:function(t,e,n){"use strict";n.r(e);var i,r=n(1),o=n(21),s=n(53),a=n(59);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u,l=(c(i={},r.ub,(function(t,e){(t[e]||[]).pop()})),c(i,r.a,Object(s.a)(o.default,(function(t,e){return!e.some((function(e){return e.thread_uuid===t.thread_uuid}))}))),c(i,r.G,Object(a.c)(o.default)),c(i,r.Yc,(function(t,e){var n=e.uuid,i=e.mode,r=t[n];r[r.length-1].mode=i})),i),d=n(0);function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=(f(u={},d.a,(function(t){return function(e){var n=t[e]||[];return n[n.length-1]||{}}})),f(u,d.Gb,(function(t){return function(e){return Boolean(t[e])}})),u),p=n(3);var b,m,v,_=(b={},m=p.a,v=function(t,e){var n=e.thread_uuid,i=e.offset_top,o=e.mode,s=t.getters[d.P](n),a=t.getters[d.S](n);i=t.getters[d.a](a).offset_top||i;var c={key:a,items:[{parent_thread_uuid:s.thread_uuid,content_container_uuid:a,thread_uuid:n,offset_top:i,mode:o}]};t.commit(r.a,c)},m in b?Object.defineProperty(b,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[m]=v,b);n.d(e,"REPLY_THREAD_MODES",(function(){return g})),n.d(e,"replyThreads",(function(){return O}));var g={MENTION:"mention",REPLY_PARENT:"reply",REPLIES:"replies"},y=function(){return{}},O=function(){return{state:y,mutations:l,getters:h,actions:_}}},467:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i,r=n(21),o=n(491),s=n.n(o),a=(n(492),n(475)),c=n(451);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=(u(i={},a.a.ERROR,"vf-status-message-error"),u(i,a.a.WARNING,"vf-status-message-warning"),i),d=r.default.extend({template:s.a,props:["type"],methods:{getClasses:function(){return u({"vf-flex":!0,"vf-status-message":!0},l[this.type],!0)}},components:{vfExclamationMarkIcon:c.a}})},468:function(t,e,n){"use strict";n.r(e),n.d(e,"STATIC",(function(){return i})),n.d(e,"EDITABLE",(function(){return r})),n.d(e,"SUBMITTING",(function(){return o})),n.d(e,"ERROR",(function(){return s}));var i="static",r="editable",o="submitting",s="error"},469:function(t,e,n){},470:function(t,e,n){},472:function(t,e,n){},473:function(t,e,n){},474:function(t,e,n){},475:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={ERROR:"error",WARNING:"warning"}},484:function(t,e,n){"use strict";var i=n(25),r=n(233)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(124)(o)},485:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=300,r=50,o=49,s=4294967295e3,a={ALL_COMMENTS:"all",FEATURED:"featured"}},488:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i=function(t,e){return"vf-".concat(t,"-").concat(e)},r=function(t,e){return"#".concat(i(t,e))}},491:function(t,e){t.exports='<div class="vf-flex vf-status-message" :class=getClasses()> <div class="vf-status-message-triangle vf-status-message-triangle-upper"></div> <div class="vf-status-message-badge vf-flex"> <div class=icon> <vf-exclamation-mark-icon class="vf-status-message-icon vf-icon-medium"></vf-exclamation-mark-icon> </div> <slot name=vf-status-message-content></slot> </div> </div> '},492:function(t,e,n){},503:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(36);var i=["button","a","input"],r=function(t){return i.includes(t.tagName.toLowerCase())}},505:function(t,e,n){},506:function(t,e,n){},507:function(t,e,n){},508:function(t,e,n){},510:function(t,e,n){},511:function(t,e,n){},512:function(t,e,n){},513:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n(13),r=function(t){return 1===t.anonymous},o=function(t,e){var n=e.enable_email_verification;return Object(i.D)(t)&&n&&!Object(i.G)(t.email_verification_status)},s=function(t,e){var n=e.enable_username_premoderation;return Object(i.D)(t)&&n&&!Object(i.G)(t.username_moderation_status)},a=function(t,e){var n=e.enable_avatar_premoderation;return Object(i.D)(t)&&n&&!Object(i.G)(t.avatar_moderation_status)}},514:function(t,e,n){},515:function(t,e,n){},516:function(t,e,n){},517:function(t,e,n){},518:function(t,e,n){},521:function(t,e,n){},524:function(t,e,n){},525:function(t,e,n){},526:function(t,e,n){},527:function(t,e,n){},528:function(t,e,n){},529:function(t,e,n){},530:function(t,e,n){},531:function(t,e,n){},532:function(t,e,n){},533:function(t,e,n){},534:function(t,e,n){},535:function(t,e,n){},536:function(t,e,n){},538:function(t,e,n){},539:function(t,e,n){},540:function(t,e,n){},541:function(t,e,n){},543:function(t,e,n){},544:function(t,e,n){},545:function(t,e,n){},546:function(t,e,n){},547:function(t,e,n){},549:function(t,e,n){},558:function(t,e,n){"use strict";var i=n(447),r=n(13),o=n(24),s={props:{isFocused:o.a.bool.def(!1),currentUser:o.a.object.isRequired,showMobileView:o.a.bool.def(!1),isDefaultContainer:o.a.bool},created:function(){this.size=i.b.SMALL},computed:{isLoggedIn:function(){return Object(r.D)(this.currentUser)},isModerator:function(){return Object(r.H)(this.currentUser)},isAdmin:function(){return Object(r.C)(this.currentUser)},classes:function(){return{"vf-content-focus-container--default":this.isDefaultContainer,"vf-content-focus-container--focused":this.isFocused,"vf-content-focus-container__mobile":this.showMobileView,"vf-is-anonymous":!this.isLoggedIn,"vf-is-logged-in":this.isLoggedIn,"vf-is-mod":this.isModerator,"vf-is-admin":this.isAdmin}}}},a=(n(661),n(50)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-focus-container",class:t.classes,on:{click:function(e){return t.$emit("focus-on-element",e)}}},[t._t("header"),t._v(" "),n("div",{staticClass:"vf-content-focus-container__contents"},[t._t("default")],2),t._v(" "),t._t("footer")],2)}),[],!1,null,"35d555b2",null);e.a=c.exports},559:function(t,e,n){"use strict";n(88);var i={props:{count:{type:Number,required:!0},a11yLabel:{type:String,required:!0},hasRealtime:{type:Boolean,default:!1},hasMentions:{type:Boolean,default:!1},isTyping:{type:Boolean,default:!1}},computed:{classes:function(){return{"remaining-content--accent":this.hasRealtime,"remaining-content--mention":this.hasMentions}},formattedCount:function(){return this.count>99?"99+":this.count}}},r=(n(587),n(50)),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"vf-icon remaining-content",class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25"}},[e("path",{attrs:{d:"M.5 23.793V2A1.5 1.5 0 0 1 2 .5h21A1.5 1.5 0 0 1 24.5 2v17a1.5 1.5 0 0 1-1.5 1.5H3.793L.5 23.793z"}}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.isTyping?e("g",this._l([6.25,12.5,18.75],(function(t){return e("circle",{key:t,staticClass:"remaining-content__loader-circle",attrs:{cx:t,cy:"10.5",r:"1.5"}})})),0):e("text",{staticClass:"remaining-content__count",attrs:{"aria-hidden":"true",y:"15",x:"12.5","text-anchor":"middle"}},[this._v("\n            "+this._s(this.formattedCount)+"\n        ")])])],1)}),[],!1,null,"640238ce",null);e.a=o.exports},561:function(t,e,n){"use strict";n(36),n(37);var i,r=n(576),o=n(285),s=n(287);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=[s.c.MIDDLE,s.c.LAST],u=[s.c.FIRST,s.c.MIDDLE,s.c.ONLY_TYPING],l=(a(i={},o.a.LIGHT_PRIMARY,"pin-line--light-primary"),a(i,o.a.ACCENT,"pin-line--accent"),a(i,o.a.MENTION,"pin-line--mention"),i),d={props:{locationInThread:{type:String,required:!0},palette:{type:String,required:!1,default:o.a.LIGHT_PRIMARY}},computed:{paletteClassTop:function(){return this.showPinAbove?l[this.palette]:""},paletteClassBottom:function(){return this.showPinBelow?l[this.palette]:""},bottomClasses:function(){var t;return a(t={},this.paletteClassBottom,!0),a(t,"pin-line--typing",this.locationInThread===s.c.ONLY_TYPING),t},showPinAbove:function(){return c.includes(this.locationInThread)},showPinBelow:function(){return u.includes(this.locationInThread)}},components:{contentLayout:r.a}},f=(n(681),n(50)),h=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-layout",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"pin-line",class:t.paletteClassTop}),t._v(" "),n("div",{staticClass:"pin-line pin-line--bottom",class:t.bottomClasses}),t._v(" "),t._t("left")]},proxy:!0},{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)})}),[],!1,null,"a9bb3810",null);e.a=h.exports},563:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var i="LIVECOMMENTS_RELOAD_KEY",r="LIVEBLOG_RELOAD_KEY"},585:function(t,e,n){"use strict";var i=n(469);n.n(i).a},586:function(t,e,n){"use strict";var i=n(470);n.n(i).a},587:function(t,e,n){"use strict";var i=n(472);n.n(i).a},588:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));n(6),n(7),n(4),n(64);var i=n(24),r=n(285),o=n(287),s=i.a.oneOf(Object.values(r.a)),a=i.a.oneOf(Object.values(o.c))},589:function(t,e,n){"use strict";n(36),n(37);var i=n(0),r=n(67),o=n(22),s=function(t,e){return Object(o.a)((function(){return t.value.state_reasons.includes(e)}))};e.a=function(t,e){var n=t.getters,a=Object(o.a)((function(){return n[i.P](e)})),c=Object(o.a)((function(){return n[i.eb]}));return{isActorGhostBanned:s(a,r.d.ACTOR_GHOST_BANNED),isActorHideBanned:s(a,r.d.ACTOR_HIDE_BANNED),isDeleted:s(a,r.d.CONTENT_DELETED),isDisabled:s(a,r.d.CONTENT_DISABLED),isPending:s(a,r.d.CONTENT_AWAITING_MODERATION),isSpam:s(a,r.d.CONTENT_MARKED_AS_SPAM),isEdited:Object(o.a)((function(){return a.value.is_edited})),isByCurrentUser:Object(o.a)((function(){return c.value.uuid===a.value.actor_uuid})),isMuted:Object(o.a)((function(){return n[i.gd](a.value.actor_uuid)}))}}},590:function(t,e,n){"use strict";var i;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}));var o={EMAIL:"email",FACEBOOK:"facebook",TWITTER:"twitter"};r(i={},o.EMAIL,"comment_share_email"),r(i,o.FACEBOOK,"comment_share_facebook"),r(i,o.TWITTER,"comment_share_twitter"),r(i,"DEFAULT","comment_share")},591:function(t,e,n){"use strict";var i=n(473);n.n(i).a},592:function(t,e){t.exports='<path fill=currentColor fill-rule=evenodd d="M50 3c7 0 13 3 18 7 4 5 7 11 8 18l5 28c2 7 5 10 9 12l3 3c1 1 2 2 2 5 0 2-2 5-5 5H10c-3 0-5-3-5-5 0-3 1-4 2-5l3-3c4-2 7-5 9-12l5-28c1-7 4-13 8-18 5-4 11-7 18-7zM36 83h28v1c0 8-6 14-14 14s-14-6-14-14v-1z"/> '},593:function(t,e,n){"use strict";var i=n(474);n.n(i).a},607:function(t,e,n){"use strict";n(41),n(12),n(18),n(6),n(7),n(4),n(64);var i=n(0),r=n(468),o=n(72),s=n(138),a=n(56),c=n(45),u=n(952),l=n(955),d=n(913),f=n(914),h=n(669),p=n(915),b=n(668),m=n(916),v=n(917),_=n(918),g=n(919),y=(n(30),n(450),n(23),n(232),n(43),n(21)),O={props:["src"],components:{vfImage:n(565).b}},E=n(50),C=Object(E.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vf-uploaded-image"},[this.src?e("vf-image",{attrs:{src:this.src,"has-overlay":!0}},[this._t("default")],2):this._e()],1)}),[],!1,null,null,null).exports,T={props:["uuid"],computed:{src:function(){var t=this.$store.getters[i.D](this.uuid);return t?t.url:null}},components:{vfPostImageWrapper:C}},S=Object(E.a)(T,(function(){var t=this.$createElement;return(this._self._c||t)("vf-post-image-wrapper",{attrs:{src:this.src}})}),[],!1,null,null,null).exports,j=n(670),A=n(451),w=n(440);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N={props:["uuid"],computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)({getUpload:i.ec}),{upload:function(){return this.getUpload(this.uuid)},src:function(){return this.upload.versions[0]&&this.upload.versions[0].url},isUploading:function(){return"completed"!==this.upload.status&&!this.hasUploadError},hasUploadError:function(){return Boolean(this.upload&&this.upload.error)},uploadProgress:function(){return this.upload&&this.upload.progress},classes:function(){return{"vf-is-uploading":this.isUploading,"vf-has-upload-error":this.hasUploadError}},exclamationProps:function(){return{circle:w.a.outline}}}),components:{vfPostImageWrapper:C,vfProgressBar:j.a,vfExclamationMarkIcon:A.a}},I=Object(E.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-post-image-wrapper",{class:t.classes,attrs:{src:t.src}},[t.isUploading?n("vf-progress-bar",{staticClass:"vf-centered",attrs:{progress:t.uploadProgress}}):t._e(),t._v(" "),t.hasUploadError?n("vf-exclamation-mark-icon",t._b({staticClass:"vf-centered vf-icon-medium"},"vf-exclamation-mark-icon",t.exclamationProps,!1)):t._e()],1)}),[],!1,null,null,null).exports;function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={props:["uploadUuid","mediaUuid"],computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)({getUpload:i.ec}),{internalMediaUuid:function(){return this.mediaUuid||this.upload&&this.upload.media_uuid},internalUploadUuid:function(){return this.internalMediaUuid?"":this.uploadUuid},upload:function(){return this.getUpload(this.uploadUuid)},componentIs:function(){return this.mediaUuid?S:this.uploadUuid?I:""},componentUuid:function(){return this.mediaUuid?this.mediaUuid:this.uploadUuid?this.uploadUuid:""}})},k=(n(671),Object(E.a)($,(function(){var t=this.$createElement;return(this._self._c||t)(this.componentIs,{tag:"component",attrs:{contenteditable:"false",uuid:this.componentUuid,"data-media-uuid":this.internalMediaUuid,"data-upload-uuid":this.internalUploadUuid}})}),[],!1,null,null,null).exports),x=n(5),L=n(466);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(s,t);var e,n,i,r,o=(e=s,function(){var t,n=V(e);if(z()){var i=V(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return G(this,t)});function s(){return M(this,s),o.apply(this,arguments)}return n=s,r=[{key:"create",value:function(t){var e={el:H(V(s),"create",this).call(this),store:x.vuexStore.getInstance(),propsData:t},n=Object.assign(e,k);return new y.default(n).$el}},{key:"value",value:function(t){var e=t.dataset.mediaUuid;return{uploadUuid:t.dataset.uploadUuid,mediaUuid:e}}}],(i=[{key:"length",value:function(){return 1}}])&&F(n.prototype,i),r&&F(n,r),s}(L.a);Y.blotName="image-upload",Y.tagName="vf-post-image-upload";n(15),n(27);var W=n(171),K=function(){var t=this,e=function(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",'"image/*"'),t.setAttribute("multiple",!0),t.setAttribute("class","vf-image-upload__input"),t}();document.body.appendChild(e),e.click();var n=this.quill.getSelection(),i=n&&n.index||0;e.addEventListener("change",(function(){Array.from(e.files).forEach((function(e){return function(t,e,n){var i=Object(W.a)();e.emitter.emit("image-embed",{uploadUuid:i,file:t}),e.insertEmbed(n,"image-upload",{uploadUuid:i})}(e,t.quill,i)})),document.body.removeChild(e)}))};n(234);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function X(t,e,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(s,t);var e,n,i,r,o=(e=s,function(){var t,n=it(e);if(nt()){var i=it(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return et(this,t)});function s(){return Z(this,s),o.apply(this,arguments)}return n=s,r=[{key:"create",value:function(t){var e=X(it(s),"create",this).call(this),n=this.makeAnchor(t.link);return e.appendChild(n),e.dataset.link=t.link,e}},{key:"value",value:function(t){return t.dataset}},{key:"makeAnchor",value:function(t){var e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("class","embedly-card"),e}}],(i=[{key:"length",value:function(){return 1}}])&&Q(n.prototype,i),r&&Q(n,r),s}(L.a);rt.blotName="embedly",rt.tagName="div";n(28),n(146);var ot=n(632);function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||ct(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ct(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){if(t){if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var lt=function(t){return t.match(ot.a)},dt=function(t,e){var n=Object.assign({},e);if("string"!=typeof t.data)return n;var i=lt(t.data);if(i&&i.length>0){var r=function(t,e){var n=[],i=0;return t.forEach((function(t){var r=e.indexOf(t,i),o=e.substring(i,r);n.push({insert:o}),n.push({insert:t,attributes:{link:t}}),i=r+t.length})),i!==e.length&&n.push({insert:e.substring(i)}),n.push({insert:"\n"}),t.forEach((function(t){n.push({insert:{embedly:{link:t}}})})),n.push({insert:""}),n}(i,t.data);n.ops=r}return n},ft=function(t){return"block"===t.constructor.blotName&&t.children.length<=1&&"break"===t.children.head.constructor.blotName},ht=function(t){return"embedly"===t.constructor.blotName},pt=function(t){return{blot:t,link:t.domNode.dataset.link}},bt=function(t,e,n){var i=t.getLine(e)[0];if(!i.next)return[t.getLength(),!0];var r=function(t){return at(t.domNode.childNodes).filter((function(t){return"A"===t.nodeName})).map((function(t){return t.getAttribute("href")}))}(i),o=function(t){for(var e=[],n=t.next;n;){var i=ht(n);if(!ft(n)&&!i)break;i&&e.push(pt(n)),n=n.next}return e}(i);if(!o.length)return[t.getIndex(i.next),!0];if(o.filter((function(t){return t.link===n})).length)return[null,null];for(var s=r.indexOf(n),a=0,c=r.filter((function(t){return t!==n})),u=Math.min(o.length,s),l=0;l<u;l++)o[l].link!==c[l+a]&&(a+=1);var d=a+1<=s,f=d?s-1-a:0,h=d?1:0,p=!!d&&f===o.length-1;return[t.getIndex(o[f].blot)+h,p]},mt=function(t,e){var n=lt(e.prefix.trim());if(n&&n.length){var i=n[0];vt(this.quill,i,t.index)}return!0},vt=function(t,e,n){var i=n-e.length;t.formatText(i,e.length,"link",e);var r=st(bt(t,n,e),2),o=r[0],s=r[1];null!==o&&(t.insertEmbed(o,"embedly",{link:e}),s&&t.insertText(o+1,""))},_t=n(633),gt=[["link"],["bold","italic"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["clean"]];u.a.register({"modules/toolbar":d.a,"modules/toolbarBottom":d.a,"themes/bubble":l.a,"formats/image":f.a,"formats/bold":h.a,"formats/italic":p.a,"formats/header":m.a,"formats/link":b.a,"formats/list":v.b,"formats/list/item":v.a,"formats/indent":_.a,"formats/blockquote":g.a}),u.a.register(Y),u.a.register(rt);var yt=Object(c.b)((function(){var t=document.createDocumentFragment(),e=document.createElement("div");t.appendChild(e);var n=Ot(e);return{toHTML:function(t){return n.setContents(t),n.root.cloneNode(!0).innerHTML}}})),Ot=function(t,e,n){if(n){var i=n;n=function(t,e){return{placeholder:t,theme:"bubble",modules:{toolbar:{container:gt},toolbarBottom:(n=e,{containerClass:"ql-toolbar-bottom",container:n,handlers:{image:K}}),clipboard:{matchers:[[Node.TEXT_NODE,dt]]},keyboard:{bindings:{tab:{key:_t.KEY_TAB,handler:function(){return!0}},spaceBuildLink:Et(_t.KEY_SPACE),returnBuildLink:Et(_t.KEY_RETURN)}}}};var n}(i.placeholder,i.bottomToolbar)}var r=new u.a(t,n);return r.setContents(e),r},Et=function(t){return{key:t,collapsed:!0,shiftKey:null,prefix:ot.b,handler:mt}},Ct=n(673),Tt=n(133),St=n(965),jt=n(24),At={props:{content:jt.a.string.isRequired}},wt=(n(675),Object(E.a)(At,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._t("start"),this._v(" "),e("div",{staticClass:"vf-content-html__content",domProps:{innerHTML:this._s(this.content)}}),this._v(" "),this._t("end")],2)}),[],!1,null,"33057879",null).exports),Pt={functional:!0,props:{isHtml:jt.a.bool.isRequired,content:jt.a.string.isRequired},render:function(t,e){var n=e.props,i=e.slots;return t(n.isHtml?wt:St.a,{props:n.isHtml?{content:n.content}:{text:n.content},scopedSlots:{start:function(){return i().start},end:function(){return i().end}}})}},Rt=Object(E.a)(Pt,void 0,void 0,!1,null,null,null).exports,Nt=n(3),It=n(619),Ut={props:{content:jt.a.object.def((function(){})),contentContainerUuid:jt.a.uuid.isRequired,placeholder:jt.a.string,showMediaIcon:jt.a.bool.def(!1),isDisabled:jt.a.bool.def(!1)},data:function(){return{editor:null}},mounted:function(){this.setEditor()},methods:{setEditor:function(){this.editor||(this.editor=Ot(Object(a.a)(".js-vf-editor-mount",this.$el),this.content,{placeholder:this.placeholder,bottomToolbar:Object(a.a)(".vf-js-custom-ql-toolbar",this.$el)}),this.editor.on("image-embed",this.onImageUpload.bind(this)),this.editor.on("text-change",this.editorChange.bind(this)),this.isDisabled&&this.editor.enable(!1))},editorChange:function(){var t=!Object(a.a)(".ql-blank",this.$el),e=JSON.stringify(this.editor.getContents());this.$emit("on-change",{hasContents:t,contents:e})},onImageUpload:function(t){var e=t.uploadUuid,n=t.file,i={uuid:e,content_container_uuid:this.contentContainerUuid,file:n};this.$store.dispatch(Nt.Cd,i)},focusEditor:function(){this.editor.focus()},resetEditor:function(){this.editor.setContents(this.content)}},watch:{content:function(){this.editor&&this.resetEditor()},placeholder:function(){this.editor&&(this.editor.root.dataset.placeholder=this.placeholder)},isDisabled:function(){this.editor.enable(!this.isDisabled)}},components:{attachImageButton:It.a}},Dt=(n(677),Object(E.a)(Ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-quill-editor"},[n("div",{staticClass:"js-vf-editor-mount vf-content-editor-input vf-content",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.$emit("request-submit"):null}}}),t._v(" "),n("div",{staticClass:"ql-toolbar vf-bottom-toolbar vf-js-custom-ql-toolbar"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.showMediaIcon,expression:"showMediaIcon"}],staticClass:"ql-formats"},[n("attach-image-button",{staticClass:"ql-image",attrs:{tag:"button"}})],1)])])}),[],!1,null,null,null).exports),$t=n(615);function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lt={props:{contentUuid:jt.a.uuid,contentContainerUuid:jt.a.uuid,status:jt.a.oneOf(Object.values(r)).def(r.EDITABLE),placeholder:jt.a.string,isRichTextEnabled:jt.a.bool.isRequired,isFocused:jt.a.bool.def(!1),characterLimit:jt.a.number.def(1/0),isDisabled:jt.a.bool.def(!1)},beforeCreate:function(){this.CHARACTER_COUNT_VISIBILITY_THRESHOLD=50,this.isAndroid=Object(Tt.c)(window)===Tt.a},data:function(){return{contents:null,hasContents:!1}},mounted:function(){!this.isRichTextEnabled&&this.isAndroid&&window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){!this.isRichTextEnabled&&this.isAndroid&&window.removeEventListener("resize",this.handleResize)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)({contentByUuid:i.P}),{isStatic:function(){return this.status===r.STATIC},staticRichTextContent:function(){return yt.getInstance().toHTML(this.content)},showMediaIcon:function(){return this.isFocused||this.hasContents},contentLength:function(){return this.contents&&this.contents.length},isOverCharLimit:function(){return!this.isRichTextEnabled&&this.remainingCharacterCount<0},remainingCharacterCount:function(){return this.characterLimit-this.contentLength},hasCharacterLimit:function(){return this.characterLimit!==1/0},content:function(){var t=this.isRichTextEnabled?{}:"",e=this.contentUuid?this.contentByUuid(this.contentUuid).content:t;return this.isRichTextEnabled&&this.contentUuid&&(e=JSON.parse(e)),e},staticContent:function(){return this.isRichTextEnabled?this.staticRichTextContent:this.content}}),methods:{getAttachments:function(t){return this.isRichTextEnabled&&""!==t?JSON.parse(t).ops.map((function(t){return Object(o.b)(["insert","image-upload","mediaUuid"],t)})).filter(Boolean):[]},requestSubmit:function(){this.hasContents&&this.$emit("request-submit")},onRichTextChange:function(t){var e=t.hasContents,n=t.contents;this.hasContents=e;var i={content:n,media_uuids:this.getAttachments(n)};this.$emit("content-update",this.hasContents,i)},onNonRichTextChange:function(){this.hasContents=this.contentLength>0,this.isOverCharLimit&&this.$refs.characterCount.pulse(),this.$emit("content-update",this.hasContents,this.contents),this.$emit("is-over-char-limit",this.isOverCharLimit)},handleResize:function(){this.isFocused&&"TEXTAREA"===document.activeElement.tagName&&setTimeout((function(){document.activeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),0)},focusOnInput:function(){this.isRichTextEnabled?this.$refs.quillEditor.focusEditor():this.$refs.textarea.focus()},resetContents:function(){this.isRichTextEnabled?this.$refs.quillEditor&&this.$refs.quillEditor.resetEditor():this.contents=this.content}},watch:{isFocused:function(){this.isRichTextEnabled||this.isFocused||this.contents.length||Ct.a.clear(Object(a.a)("textarea",this.$el))},hasContents:function(){Ct.a.update(this.$refs.textarea)},status:{handler:function(t,e){t===r.EDITABLE&&e!==r.ERROR&&this.resetContents()},immediate:!0}},components:{characterCount:$t.a,quillEditor:Dt,staticContent:Rt},directives:{autoresize:Ct.a}},Bt=(n(679),Object(E.a)(Lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isStatic?n("static-content",{attrs:{"is-html":t.isRichTextEnabled,content:t.staticContent},scopedSlots:t._u([{key:"start",fn:function(){return[t._t("content-start")]},proxy:!0},{key:"end",fn:function(){return[t._t("content-end")]},proxy:!0}],null,!0)}):n("div",{staticClass:"vf-content-editor-form"},[n("div",{staticClass:"vf-editor-area",class:{"vf-editor-area--with-limit":t.hasCharacterLimit}},[t.isRichTextEnabled?n("quill-editor",{ref:"quillEditor",attrs:{content:t.content,placeholder:t.placeholder,"content-container-uuid":t.contentContainerUuid,"show-media-icon":t.showMediaIcon,"is-disabled":t.isDisabled},on:{"on-change":t.onRichTextChange,"request-submit":t.requestSubmit}}):n("textarea",{directives:[{name:"autoresize",rawName:"v-autoresize"},{name:"model",rawName:"v-model",value:t.contents,expression:"contents"}],ref:"textarea",staticClass:"vf-content-editor-input vf-content vf-content-editor-form__textarea",class:{"vf-content-editor-form__textarea--empty":0===t.contentLength},attrs:{"aria-label":t.placeholder,placeholder:t.placeholder,disabled:t.isDisabled},domProps:{value:t.contents},on:{input:[function(e){e.target.composing||(t.contents=e.target.value)},t.onNonRichTextChange],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.requestSubmit(e):null}}}),t._v(" "),n("character-count",{ref:"characterCount",staticClass:"vf-content-editor-form__character-count",attrs:{"a11y-warning":"conversations.rich_text.character_limit.warning","a11y-error":"conversations.rich_text.character_limit.error","visible-threshold":t.CHARACTER_COUNT_VISIBILITY_THRESHOLD,count:t.remainingCharacterCount}})],1)])}),[],!1,null,null,null));e.a=Bt.exports},608:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18);var i=n(0),r=n(138),o=n(67),s=n(465),a=n(513),c=(n(64),n(36),n(37),n(79)),u=n(440),l=n(451);function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f,h=[c.ERROR,c.WARNING],p={props:{level:{type:String,required:!0,validator:function(t){return h.includes(t)}},showCloseButton:{type:Boolean,required:!1,default:!1}},computed:{classes:function(){var t;return d(t={},"vf-error",this.level===c.ERROR),d(t,"vf-warning",this.level===c.WARNING),d(t,"warning-icon",this.level===c.WARNING),t},circle:function(){return this.level===c.ERROR?u.a.filled:u.a.outline}},components:{vfExclamationMarkIcon:l.a}},b=(n(683),n(50)),m=Object(b.a)(p,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user-status"},[e("span",{staticClass:"user-status__icon-wrapper"},[e("vf-exclamation-mark-icon",{staticClass:"vf-icon-medium",class:this.classes,attrs:{circle:this.circle}})],1),this._v(" "),e("div",{staticClass:"user-status__content"},[this._t("default")],2)])}),[],!1,null,"5a10da31",null).exports,v=n(98);function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g,y=(_(f={},v.REJECTED,"moderation.username_rejected"),_(f,v.PENDING_NEW,"moderation.username_pending_new"),_(f,v.PENDING_UPDATE,"moderation.username_pending_update"),f),O={props:{status:{type:String,required:!0,validator:function(t){return Object.values(v).includes(t)}}},beforeCreate:function(){this.I18N_KEYS=y},computed:{level:function(){switch(this.status){case v.REJECTED:return c.ERROR;case v.PENDING_NEW:case v.PENDING_UPDATE:default:return c.WARNING}}},components:{userStatus:m}},E=Object(b.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports;function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(C(g={},v.REJECTED,"moderation.avatar_rejected"),C(g,v.PENDING_NEW,"moderation.avatar_pending_new"),C(g,v.PENDING_UPDATE,"moderation.avatar_pending_update"),g),S={props:{status:{type:String,required:!0,validator:function(t){return Object.values(v).includes(t)}}},beforeCreate:function(){this.I18N_KEYS=T},computed:{level:function(){switch(this.status){case v.REJECTED:return c.ERROR;case v.PENDING_NEW:case v.PENDING_UPDATE:default:return c.WARNING}}},components:{userStatus:m}},j=Object(b.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("user-status",{attrs:{level:this.level}},[e("span",{staticClass:"vf-label vf-label-upper"},[this._v(this._s(this.$i18n(this.I18N_KEYS[this.status])))])])}),[],!1,null,null,null).exports,A=(n(88),n(447)),w=n(575);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},I={props:{message:{type:String,required:!0},dateExpired:{type:Number,required:!0},isPermanent:{type:Boolean,required:!0}},beforeCreate:function(){this.ERROR_LEVEL=c.ERROR,this.BUTTON_SIZE=A.b.INLINE,this.BUTTON_PALETTE=A.a.ACCENT},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.c)({dateFormat:i.pb}),{formattedDate:function(){return this.dateFormat(this.dateExpired,N)},banMessage:function(){return this.$i18n("error.banned_from_posting",{permanent:this.isPermanent?1:0,endDate:this.dateExpired,reason:void 0})}}),components:{userStatus:m,textTip:w.a}},U=(n(686),Object(b.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("user-status",{staticClass:"vf-posting-ban-error vf-label vf-label-upper",attrs:{level:t.ERROR_LEVEL,"aria-live":"polite"}},[t.isPermanent?[t._v("\n        "+t._s(t.banMessage)+"\n    ")]:[n("time",{attrs:{datetime:new Date(t.dateExpired).toISOString()}},[t._v(t._s(t.banMessage))])],t._v(" "),t.message.trim().length>0?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-posting-ban-error__tooltip",attrs:{positions:["bottom-left"],"is-link":"",content:t.message,palette:t.BUTTON_PALETTE,size:t.BUTTON_SIZE},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("error.why_banned"))+"\n            ")]},proxy:!0}],null,!1,2972872782)})]:t._e()],2)}),[],!1,null,"8226ade0",null).exports);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){$(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.c)({currentUser:i.eb,settings:i.Dc,currentBan:i.n}),{usernameNotApproved:function(){return Object(a.d)(this.currentUser,this.settings)},avatarNotApproved:function(){return Object(a.a)(this.currentUser,this.settings)},isPostingBanned:function(){return this.currentBan&&this.currentBan.ban_level===o.a.POSTING},mustVerifyEmail:function(){return!1}}),components:{usernameWarning:E,avatarWarning:j,postingBanError:U}},x=Object(b.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPostingBanned?n("posting-ban-error",{staticClass:"user-moderation-status",attrs:{"aria-live":"polite",message:t.currentBan.user_message,"date-expired":t.currentBan.date_expired,"is-permanent":t.currentBan.is_permanent}}):t.mustVerifyEmail?n("email-verification-error",{staticClass:"user-moderation-status"}):t.usernameNotApproved?n("username-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.username_moderation_status}}):t.avatarNotApproved?n("avatar-warning",{staticClass:"user-moderation-status",attrs:{status:t.currentUser.avatar_moderation_status}}):t._e()}),[],!1,null,null,null).exports,L={beforeCreate:function(){this.ERROR_LEVEL=c.ERROR},components:{userStatus:m}},B=Object(b.a)(L,(function(){var t=this.$createElement;return(this._self._c||t)("user-status",{staticClass:"vf-offline-posting-error vf-label vf-label-upper",attrs:{level:this.ERROR_LEVEL,"aria-live":"polite"}},[this._v("\n    "+this._s(this.$i18n("conversations.posts.offline"))+"\n")])}),[],!1,null,null,null).exports,M=n(468),F=n(123),H=n(441),q=n(456),G=n(185),z=n(24),V={data:function(){return{buttonStatus:G.a.NONE}},props:{status:z.a.oneOf(Object.values(M)).def(M.EDITABLE),isEnabled:z.a.bool.def(!1)},computed:{isSubmitting:function(){return this.status===M.SUBMITTING},showCancelButton:function(){return!F.e}},methods:{setButtonStatus:function(t){var e=this,n=this.getButtonStatus(t);clearTimeout(this.errorTid),this.buttonStatus=n,t!==G.a.ERROR&&t!==G.a.SUCCESS||(this.errorTid=setTimeout((function(){e.buttonStatus=G.a.NONE}),4e3))},getButtonStatus:function(t){switch(t){case M.ERROR:return G.a.ERROR;case M.SUBMITTING:return G.a.PENDING;case M.STATIC:return G.a.SUCCESS;case M.EDITABLE:default:return G.a.NONE}}},components:{loaderButton:q.a,vfButton:H.a},watch:{status:function(){this.setButtonStatus(this.status)}}},Y=(n(687),Object(b.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-editor-actions"},[t.showCancelButton?n("vf-button",{staticClass:"vf-content-editor-actions__cancel vf-label vf-label-upper",attrs:{palette:"accent","is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("cancel")}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.cancel"))+"\n    ")]):t._e(),t._v(" "),n("loader-button",{staticClass:"vf-content-editor-actions__submit vf-label vf-label-upper",attrs:{"is-cta":"",palette:"accent",size:"medium",status:t.buttonStatus,disabled:!t.isEnabled||t.isSubmitting},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("submit",e.target)}}},[t._v("\n        "+t._s(t.$i18n("conversations.rich_text.post"))+"\n    ")])],1)}),[],!1,null,"565eba7e",null).exports);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J={props:{showUserStatus:z.a.bool.def(!1),isFocused:z.a.bool.def(!1),editorStatus:z.a.string,hasContentUpdated:z.a.bool.def(!1),isSubmitEnabled:z.a.bool,hasEditableContents:z.a.bool.def(!1)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.c)({currentBan:i.n,isOffline:i.Pb}),{isBanned:function(){return this.currentBan.ban_level!==o.a.NONE},areActionsVisible:function(){return this.isFocused||this.hasEditableContents}}),components:{heightTransition:s.a,contentEditorActions:Y,offlineError:B,userModerationStatus:x}},Z=(n(688),Object(b.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-focus-container__footer"},[n("height-transition",[t.isOffline&&t.isFocused?n("offline-error",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.showUserStatus&&!t.isOffline?n("user-moderation-status",{staticClass:"vf-user-moderation-status"}):t._e()],1),t._v(" "),n("height-transition",[t.areActionsVisible?n("content-editor-actions",{staticClass:"vf-content-focus-container__editor-actions",attrs:{status:t.editorStatus,"is-enabled":t.hasContentUpdated&&t.isSubmitEnabled&&!t.isBanned&&!t.isOffline},on:{submit:function(e){return t.$emit("submit",e)},cancel:function(e){return t.$emit("cancel-edit")}},nativeOn:{focusin:function(e){return t.$emit("actions-focused",e)}}}):t._e()],1)],1)}),[],!1,null,"71acf5a8",null));e.a=Z.exports},609:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18);var i,r=n(3),o=n(0),s=n(1),a=n(217),c=n(287),u=n(369),l=n(67),d=n(138),f=n(140),h=n(623),p=n(576),b=n(624),m={props:{isTyping:Boolean},components:{contentLayout:p.a,typingIndicator:b.a}},v=(n(699),n(50)),_=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reply-typing-indicator",class:{"reply-typing-indicator--visible":t.isTyping}},[n("content-layout",{staticClass:"reply-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"reply-typing-indicator__indicator"},[n("typing-indicator",{attrs:{"is-typing":t.isTyping}})],1)]},proxy:!0}])})],1)}),[],!1,null,"7ad8d255",null).exports,g=(n(64),n(36),n(37),n(88),n(447)),y=n(561),O=n(559),E={props:{isTyping:Boolean,count:{type:Number,default:0,required:!1},palette:String},computed:{a11yLabel:function(){return""},hasRealtime:function(){return this.palette===g.a.ACCENT},hasMentions:function(){return this.palette===g.a.MENTION}},components:{contentBadge:O.a}},C=(n(700),Object(v.a)(E,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[e("content-badge",{attrs:{"is-typing":this.isTyping,"has-realtime":this.hasRealtime,"has-mentions":this.hasMentions,count:this.count,"a11y-label":this.a11yLabel}})],1)}),[],!1,null,"216129e6",null).exports),T=n(498);function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=[g.a.ACCENT,g.a.MENTION,g.a.LIGHT_PRIMARY],A=(S(i={},g.a.ACCENT,"vf-threaded-content-indicator--accent"),S(i,g.a.MENTION,"vf-threaded-content-indicator--mention"),S(i,g.a.LIGHT_PRIMARY,"vf-threaded-content-indicator--light-primary"),i),w={props:{buttonText:String,iconText:String,count:Number,palette:{type:String,validator:function(t){return j.includes(t)},default:g.a.LIGHT_PRIMARY},threadPalette:String,locationInThread:{type:String,validator:function(t){return Object.values(c.c).includes(t)},default:c.c.MIDDLE},isTyping:Boolean,isLoading:{type:Boolean,default:!1}},computed:{paletteClass:function(){return A[this.palette]}},methods:{showContent:function(){this.$emit("show-content")}},components:{threadedLayout:y.a,contentIndicator:C,spinningLoader:T.a}},P=(n(701),Object(v.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"vf-threaded-content-indicator vf-no-outline",class:t.paletteClass,attrs:{palette:t.palette},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showContent(e)}}},[n("threaded-layout",{staticClass:"vf-threaded-content-indicator__layout",attrs:{"location-in-thread":t.locationInThread,palette:t.threadPalette},scopedSlots:t._u([{key:"left",fn:function(){return[n("content-indicator",{staticClass:"vf-threaded-content-indicator__icon",attrs:{count:t.count,"is-typing":t.isTyping,palette:t.palette}}),t._v(" "),n("span",{staticClass:"vf-offscreen-text"},[t._v("\n                "+t._s(t.iconText)+"\n            ")])]},proxy:!0},{key:"right",fn:function(){return[n("span",{staticClass:"vf-label vf-label-upper",class:{"vf-threaded-content-indicator__text--hidden":t.isLoading},attrs:{"aria-hidden":t.isLoading}},[t._v("\n                "+t._s(t.buttonText)+"\n            ")]),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("span",{staticClass:"vf-threaded-content-indicator__loader-wrapper"},[n("spinning-loader")],1):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"45736df8",null).exports),R=n(966),N=n(24);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $={props:{threadUuid:N.a.uuid.isRequired,subthreads:N.a.array.isRequired,threadPalette:N.a.string.isRequired,contentContainerUuid:N.a.uuid.isRequired,limit:N.a.number.isRequired,fetchRepliesAction:N.a.string.isRequired,fetchSelectedAction:N.a.string.isRequired,oldReplyCount:N.a.number,oldMentionsInThread:N.a.array,realtimeCount:N.a.number,isReadyForContent:N.a.bool,storeAction:N.a.string.isRequired,isFocused:N.a.bool.def(!1),maximumContentLength:N.a.number.def(1/0),isExpanded:N.a.bool,headerHeightPx:N.a.number,isFetchingContent:N.a.bool.def(!1),hasBorder:N.a.bool},data:function(){return{isFetchingOldContent:!1}},inject:[a.a,a.e],mounted:function(){var t=this;Object(f.d)().then((function(){t.observer=Object(f.a)(t.$refs.intersector,t.intersectionHandler)}))},beforeDestroy:function(){this.observer&&this.observer.unobserve(this.$refs.intersector)},computed:U({},Object(d.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.Pc)]},hasUnreadRepliesInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.zb)]},hasUnreadMentionsInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.xb)]},hasUnreadRepliesInSubthread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.yb)]},hasUnreadMentionsInSubthread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.wb)]},selectedContentInThread:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(o.vc)]}}),{},Object(d.c)({interactions:o.Fb,contentByUuid:o.P,isUserMutedByCurrentUser:o.gd,activeReplyThreadByContainerUuid:o.a,isExpired:o.vb,isActiveReplyThread:o.Gb}),{oldMentionCount:function(){return this.oldMentionsInThread.length},isReplyFormVisible:function(){return this.hasReplies&&!this.isUserMutedByCurrentUser(this.head.actor_uuid)&&this.head.state===l.c.VISIBLE&&!this.isExpired(this.contentContainerUuid)},thread:function(){return this.threadByUuid(this.threadUuid)},hasUnreadMentions:function(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadMentionsInThread(this.threadUuid):this.hasUnreadMentionsInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},hasUnreadReplies:function(){return this.head.content_container_uuid===this.thread.thread_top_uuid?this.hasUnreadRepliesInThread(this.threadUuid):this.hasUnreadRepliesInSubthread({thread_uuid:this.thread.thread_top_uuid,subthread_uuid:this.threadUuid})},head:function(){return this.contentByUuid(this.threadUuid)},hasReplies:function(){return this.head.total_replies>0},parentLocationInThread:function(){return this.isExpanded?this.hasReplies?c.c.FIRST:this.isTypingInThread?c.c.ONLY_TYPING:c.c.ONLY:c.c.ONLY},isTypingInThread:function(){var t=this;return this.interactions(this.threadUuid).isTyping||this.subthreads.some((function(e){return t.interactions(e).isTyping}))},contentIndicatorText:function(){var t,e,n=this.realtimeCount;return this.hasUnreadMentions&&this.hasUnreadReplies?(t=this.$i18n("conversations.threads.content_indicator.reply_and_mention.label"),e=this.$i18n("conversations.threads.content_indicator.reply_and_mention.count",{count:n})):this.hasUnreadMentions?(t=this.$i18n("conversations.threads.content_indicator.mention.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.mention.count",{count:n})):(t=this.$i18n("conversations.threads.content_indicator.reply.label",{count:n}),e=this.$i18n("conversations.threads.content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},activeReplyThread:function(){return this.activeReplyThreadByContainerUuid(this.head.content_container_uuid)},selectedThreadContent:function(){return this.selectedContentInThread(this.threadUuid)},hasSelectedThreadContent:function(){return this.selectedThreadContent.length>0},oldContentPalette:function(){return this.oldMentionCount>0?this.threadPalette:this.PALETTES.LIGHT_PRIMARY},oldCountWithSelectedContent:function(){var t=this.head.total_replies,e=this.thread,n=e.thread_uuid,i=e.thread_top_uuid;return n!==i&&i!==this.head.content_container_uuid&&(t=this.threadByUuid(i).total_content),t-this.selectedThreadContent.length},oldContentCount:function(){return this.oldMentionCount>0?this.oldMentionCount:this.hasSelectedThreadContent?this.oldCountWithSelectedContent:this.oldReplyCount},oldContentIndicatorText:function(){var t,e,n=this.oldContentCount;return this.oldMentionCount>0?(t=this.$i18n("conversations.threads.old_content_indicator.mention.label"),e=this.$i18n("conversations.threads.old_content_indicator.mention.count",{count:n})):this.hasSelectedThreadContent?(t=this.$i18n("conversations.threads.old_content_indicator.thread.label"),e=this.$i18n("conversations.threads.old_content_indicator.thread.count",{count:n})):(t=this.$i18n("conversations.threads.old_content_indicator.reply.label"),e=this.$i18n("conversations.threads.old_content_indicator.reply.count",{count:n})),{buttonText:t,iconText:e}},realtimeLocationInThread:function(){return this.isReplyFormVisible?c.c.MIDDLE:c.c.LAST}}),methods:U({},Object(d.b)({addActiveReplyThread:r.a}),{isLastReply:function(t){return t+1===this.subthreads.length},getChildLocationInThread:function(t){return!this.isReplyFormVisible&&this.isLastReply(t)&&0===this.realtimeCount?c.c.LAST:c.c.MIDDLE},intersectionHandler:function(t){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.ad),{thread_uuid:this.threadUuid,is_in_view:t[0].isIntersecting})},removeFocus:function(){this.$refs.replyForm.removeFocus()},fetchOldContent:function(){var t=this;if(this.oldMentionCount>0)return this.fetchOldMentions();var e=this.thread,n=e.selected_content,i=e.thread_uuid,r=e.thread_top_uuid,o=e.page_from;if(n.length>0&&i!==r&&r!==this.contentContainerUuid){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.N),this.threadUuid);var a=this.$el.parentElement.parentElement.offsetTop-this.headerHeightPx;return this.addActiveReplyThread({thread_uuid:r,offset_top:a,mode:u.REPLY_THREAD_MODES.REPLIES})}return n.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.N),this.threadUuid),this.isFetchingOldContent=!0,this.$store.dispatch(this.fetchRepliesAction,{content_uuid:this.threadUuid,limit:this.limit,starting_from:o,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingOldContent=!1,t.isActiveReplyThread(t.contentContainerUuid)&&t.$store.commit(s.Yc,{uuid:t.contentContainerUuid,mode:u.REPLY_THREAD_MODES.REPLIES})}))},fetchOldMentions:function(){var t=this,e=this.oldMentionsInThread[0].target_uuid,n=this.oldMentionsInThread.filter((function(t){return t.target_uuid===e})).map((function(t){return t.content_uuid}));return this.thread.selected_content.length>0&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.N),this.threadUuid),this.$store.dispatch("".concat(this.THREAD_NAMESPACE,"/").concat(r.Tb),{content_container_uuid:this.contentContainerUuid,thread_uuid:e,selected_content_uuids:n,fetchAction:this.fetchSelectedAction}).then((function(){var n=t.$el.parentElement.parentElement.offsetTop-t.headerHeightPx;return t.addActiveReplyThread({thread_uuid:e,offset_top:n,mode:u.REPLY_THREAD_MODES.MENTION})}))},showNewContent:function(){this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(s.E),{thread_uuid:this.threadUuid,limit:this.limit})}}),components:{replyTypingIndicator:_,replyForm:h.a,threadedContentIndicator:P,heightTransitionGroup:R.a}},k=(n(703),Object(v.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-thread",class:{"vf-thread--open":t.hasReplies,"vf-thread--no-border":!t.hasBorder}},[t.activeReplyThread.thread_uuid&&t.isFocused?n("div",{staticClass:"vf-thread__reply-thread-overlay",on:{click:function(e){return t.$emit("remove-focus")}}}):t._e(),t._v(" "),t._t("head",null,{locationInThread:t.parentLocationInThread}),t._v(" "),n("threaded-content-indicator",t._b({directives:[{name:"show",rawName:"v-show",value:t.oldContentCount>0&&t.isExpanded,expression:"oldContentCount > 0 && isExpanded"}],staticClass:"vf-thread__old-content-indicator",attrs:{"thread-palette":t.threadPalette,palette:t.oldContentPalette,count:t.oldContentCount,"is-loading":t.isFetchingContent||t.isFetchingOldContent},on:{"show-content":t.fetchOldContent}},"threaded-content-indicator",t.oldContentIndicatorText,!1)),t._v(" "),t.isReadyForContent&&t.isExpanded?n("height-transition-group",{staticClass:"vf-thread__replies",attrs:{tag:"ul",role:"list"}},t._l(t.subthreads,(function(e,i){return n("li",{key:e,staticClass:"vf-thread__reply-list-item",attrs:{id:"vf-thread--"+e}},[t._t("reply",null,{threadUuid:e,locationInThread:t.getChildLocationInThread(i)})],2)})),0):t._e(),t._v(" "),t.realtimeCount>0&&t.isExpanded?n("threaded-content-indicator",t._b({attrs:{"thread-palette":t.threadPalette,"location-in-thread":t.realtimeLocationInThread,"is-typing":t.isTypingInThread,palette:t.threadPalette,count:t.realtimeCount},on:{"show-content":t.showNewContent}},"threaded-content-indicator",t.contentIndicatorText,!1)):t.isExpanded?n("reply-typing-indicator",{attrs:{"is-typing":t.isTypingInThread}}):t._e(),t._v(" "),n("div",{ref:"intersector"}),t._v(" "),t.isReplyFormVisible&&t.isExpanded?n("reply-form",{ref:"replyForm",staticClass:"vf-thread__reply-form",attrs:{"is-expanded":"","replying-to":t.head,palette:t.threadPalette,"store-action":t.storeAction,"show-parent":!1,"character-limit":t.maximumContentLength},on:{focusin:function(e){return t.$emit("focusin")},"remove-focus":function(e){return t.$emit("focusout")}}}):t._e()],2)}),[],!1,null,"be4f7ec8",null));e.a=k.exports},611:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18);var i=n(0),r=n(138),o=n(558),s=n(24),a={props:{isFocused:s.a.bool.def(!1),currentUser:s.a.object.isRequired,errorMessage:s.a.string.def("")},components:{contentFocusContainer:o.a}},c=(n(695),n(50)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"vf-rich-text-form__error"},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")])])]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,null,null).exports,l=n(608);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={props:{showUserStatus:s.a.bool.def(!1),isSubmitEnabled:s.a.bool,isFocused:s.a.bool.def(!1),hasContentUpdated:s.a.bool.def(!1),canFocus:s.a.bool,editorStatus:s.a.string,errorMessage:s.a.string.def("")},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.c)({currentUser:i.eb}),{hasEditableContents:function(){return this.hasContentUpdated&&this.canFocus},classes:function(){return{"vf-content-focus-container--has-contents":!this.isFocused&&this.hasEditableContents}}}),components:{contentFocusContainerWithError:u,contentFocusContainerFooter:l.a}},p=(n(696),Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-error",{class:t.classes,attrs:{"is-focused":t.isFocused,"error-message":t.errorMessage,"current-user":t.currentUser},on:{"focus-on-element":function(e){return t.$emit("focus-on-element",e)},close:function(e){return t.$emit("remove-focus")}},scopedSlots:t._u([{key:"header",fn:function(){return[t._t("header")]},proxy:!0},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"is-focused":t.isFocused,"show-user-status":t.showUserStatus,"editor-status":t.editorStatus,"has-content-updated":t.hasContentUpdated,"is-submit-enabled":t.isSubmitEnabled,"has-editable-contents":t.hasEditableContents},on:{submit:function(e){return t.$emit("submit",e)},"cancel-edit":function(e){return t.$emit("cancel-edit")},"actions-focused":function(e){return t.$emit("actions-focused",e)}}})]},proxy:!0}],null,!0)},[t._t("default")],2)}),[],!1,null,"1bf10624",null));e.a=p.exports},613:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(36),n(37),n(170);var i,r,o=n(138),s=n(0),a=n(24),c=(n(30),n(23),n(232),n(10),n(290)),u=n(2),l=n(56),d=n(14),f=n(126);function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}h(i={},d.c.LIVEBLOG,{ad_integration:f.i,site_ad_id:f.j}),h(i,d.c.LIVESTORY,{ad_integration:f.i,site_ad_id:f.j}),h(i,d.c.CONTENT_RECIRCULATION,{ad_integration:f.b,site_ad_id:f.c}),h(i,d.c.COMMENTS,{ad_integration:f.a,site_ad_id:f.l});var p,b=(h(r={},d.c.CONTENT_RECIRCULATION,u.E.EVENTS.REQUEST_CONTENT_RECIRCULATION_AD),h(r,d.c.COMMENTS,u.E.EVENTS.REQUEST_COMMENT_AD),h(r,d.c.LIVEBLOG,u.E.EVENTS.REQUEST_LIVEBLOG_AD),r);function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return function(){var e,n=C(t);if(E()){var i=C(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return O(this,e)}}function O(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}var A=function(){function t(e){T(this,t),this.widgetTag=e}return j(t,[{key:"publishAdRequest",value:function(t){window.vf.$publish(u.E.CHANNEL,b[this.widgetTag],t)}}]),t}(),w=function(t){_(n,t);var e=y(n);function n(){return T(this,n),e.apply(this,arguments)}return j(n,[{key:"loadScript",value:function(t){return window.deployads=window.deployads||[],Object(l.c)("//tags-cdn.deployads.com/a/".concat(t,".js"))}},{key:"generateAd",value:function(t){var e=document.getElementById(t);return e.parentNode.style="display: block;",e.innerHTML='<div class="ad-tag" data-ad-name="comment_ad" data-ad-size="auto" data-ad-expand-size="both"></div>',window.deployads.push({}),Promise.resolve()}},{key:"adCleanup",value:function(){}}]),n}(A),P=function(t){_(n,t);var e=y(n);function n(){return T(this,n),e.apply(this,arguments)}return j(n,[{key:"loadScript",value:function(){return Promise.resolve()}},{key:"generateAd",value:function(t){return this.publishAdRequest(t),new Promise((function(e){window.googletag.pubads().addEventListener("slotRenderEnded",(function(n){n.slot.getSlotElementId()===t&&e()}))}))}},{key:"adCleanup",value:function(t){var e=window.googletag.pubads().getSlots().filter((function(e){return e.getSlotElementId()===t}));window.googletag.destroySlots(e)}}]),n}(A),R=function(t){_(n,t);var e=y(n);function n(){return T(this,n),e.apply(this,arguments)}return j(n,[{key:"loadScript",value:function(){return Promise.resolve()}},{key:"generateAd",value:function(t){return this.publishAdRequest(t),Promise.resolve()}},{key:"adCleanup",value:function(){}}]),n}(A),N=function(t){_(n,t);var e=y(n);function n(){return T(this,n),e.apply(this,arguments)}return j(n,[{key:"loadScript",value:function(){return Object(l.c)("https://rdc.m32.media/madops.min.js").then((function(){return new Promise((function(t,e){!function n(){window.madops&&window.madops.isReady&&window.madops.isReady()?t():!window.madops||null!==window.madops.gptReady&&null!==window.madops.customFileReady?setTimeout(n,10):e()}()}))}))}},{key:"generateAd",value:function(t){var e=document.getElementById(t),n=window.__generate_viafoura_tag;if(!n)return Promise.reject("window.__generate_viafoura_tag is not present.");return function(t){var n=document.createElement("div");n.setAttribute("data-m32-dynamic-ad",""),n.setAttribute("data-options",t),e.appendChild(n),window.madops.addDynamicAd(n)}(n(Object(d.e)(this.widgetTag))),Promise.resolve()}},{key:"adCleanup",value:function(){}}]),n}(A),I=(m(p={},c.a.SORTABLE,w),m(p,c.a.CUSTOM,R),m(p,c.a.GTAG,P),m(p,c.a.M32,N),p),U={},D=n(79);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=Object.freeze([D.PENDING,D.SUCCESS]),L={data:function(){return{adStatus:D.PENDING}},props:{uniqueId:a.a.string.isRequired,adSettings:a.a.object.isRequired},mounted:function(){var t=this;this.adService=function(t,e){var n=U[t];if(n)return n;var i=new(0,I[e])(t);return U[t]=i,i}(this.adSettings.widget_tag,this.adIntegration),this.adService.loadScript(this.siteAdId).then((function(){t.adService.generateAd(t.slotId).then((function(){t.adStatus=D.SUCCESS})).catch((function(){t.adStatus=D.ERROR}))}))},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.c)({siteSettings:s.Dc}),{adIntegration:function(){return this.siteSettings[this.adSettings.ad_integration]},siteAdId:function(){return this.siteSettings[this.adSettings.site_ad_id]},slotId:function(){return"vf-promo-".concat(this.uniqueId)},active:function(){return this.adStatus===D.SUCCESS},enabled:function(){return x.includes(this.adStatus)},error:function(){return this.adStatus===D.ERROR}}),beforeDestroy:function(){this.adService.adCleanup(this.slotId)}},B=(n(591),n(50)),M=Object(B.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"vf-promo":t.enabled,"vf-promo--active":t.active,"vf-promo--error":t.error}},[n("div",{staticClass:"vf-label vf-label-upper vf-promo__label"},[t._v("\n        "+t._s(t.$i18n("ads.advertisement"))+"\n    ")]),t._v(" "),n("div",{attrs:{id:t.slotId}})])}),[],!1,null,"b8e4cb10",null);e.a=M.exports},616:function(t,e,n){"use strict";var i=n(24),r=n(610),o={props:{sectionUuid:i.a.uuid.isRequired,rootSectionUuid:i.a.uuid,product:i.a.string.isRequired,ariaLabel:i.a.string.isRequired},components:{branding:r.a}},s=(n(586),n(50)),a=Object(s.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"vf3-conversations-footer",attrs:{"aria-label":this.ariaLabel}},[e("branding",{attrs:{product:this.product,"section-uuid":this.sectionUuid,"root-section-uuid":this.rootSectionUuid}})],1)}),[],!1,null,"65657681",null);e.a=a.exports},618:function(t,e,n){"use strict";n(88);var i=n(458),r=n(287),o=n(123),s=n(607),a=n(561);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=c({},r.c.ONLY,"vf-new-content--single"),l={props:{user:Object,isRichTextEnabled:Boolean,editorStatus:String,placeholder:String,isFocused:Boolean,contentContainerUuid:String,avatarSize:{type:String,default:i.a.MEDIUM},locationInThread:String,palette:String,characterLimit:Number,isDisabled:{type:Boolean,default:!1}},created:function(){this.threadedLayoutClasses=u[this.locationInThread]},computed:{computedAvatarSize:function(){return o.e?i.a.SMALL:this.avatarSize},contentEditorClasses:function(){return c({},"vf-new-content__editor--".concat(this.computedAvatarSize,"-avatar"),!0)}},methods:{handleContentUpdate:function(t,e){this.$emit("content-update",t,e)},focusOnContentEditor:function(){this.$refs.contentEditor.focusOnInput()},clearContent:function(){this.$refs.contentEditor.resetContents()}},components:{contentEditor:s.a,threadedLayout:a.a}},d=(n(682),n(50)),f=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("threaded-layout",{staticClass:"vf-new-content",class:t.threadedLayoutClasses,attrs:{"location-in-thread":t.locationInThread,palette:t.palette},scopedSlots:t._u([{key:"left",fn:function(){return[t._t("avatar",null,{user:t.user,size:t.computedAvatarSize})]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"vf-new-content__content-editor-slot-wrapper"},[n("div",{staticClass:"vf-new-content__content-editor-wrapper"},[n("content-editor",{ref:"contentEditor",staticClass:"vf-new-content__content-editor",class:t.contentEditorClasses,attrs:{"content-container-uuid":t.contentContainerUuid,status:t.editorStatus,placeholder:t.placeholder,"is-focused":t.isFocused,"is-rich-text-enabled":t.isRichTextEnabled,"character-limit":t.characterLimit,"is-disabled":t.isDisabled},on:{"content-update":t.handleContentUpdate,"is-over-char-limit":function(e){return t.$emit("is-over-char-limit",e)},"request-submit":function(e){return t.$emit("request-submit")}}}),t._v(" "),t._t("default")],2),t._v(" "),t._t("footer")],2)]},proxy:!0}],null,!0)})}),[],!1,null,"db6d7406",null);e.a=f.exports},619:function(t,e,n){"use strict";var i={props:["tag","isFocused"],components:{vfAttachImgIcon:n(676).a}},r=(n(585),n(50)),o=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e(this.tag,{tag:"component",staticClass:"attach-image-button vf-button",class:{"is-focused":this.isFocused}},[e("vf-attach-img-icon",{staticClass:"vf-icon-medium"}),this._v(" "),this._t("default")],2)}),[],!1,null,"4394628a",null);e.a=o.exports},623:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(18),n(10),n(4),n(88);var i=n(468),r=n(0),o=n(458),s=n(287),a=n(445),c=n(291),u=n(217),l=n(138),d=(n(106),n(149)),f=n(503),h=n(292),p=n(125),b=n(611),m=n(618),v=n(463),_=n(465);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e){var n=this.$store.getters[r.S](t),i=this.$store.getters[r.uc](n);e=n===e?t:e,Object(h.a)({content_container_uuid:n,section_uuid:i,content_uuid:t,thread_uuid:e}).then((function(t){}))}var E={props:{isExpanded:{type:Boolean,default:!1},replyingTo:{required:!0},storeAction:{type:String,required:!0},locationInThread:String,palette:String,characterLimit:Number},data:function(){return{isFocused:!1,hasContents:!1,replyEditorContent:this.defaultEditorContent,replyStatus:i.EDITABLE,editedContents:this.defaultEditorContent,replyErrorMessage:"",isOverCharLimit:!1}},inject:[u.e],mounted:function(){this.signalTyping=Object(d.d)(O,c.a)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(l.c)({user:r.eb,contentContainerByContentUuid:r.S}),{avatarSize:function(){return o.a.SMALL},hasSlotContent:function(){return Boolean(this.$slots.default)},localLocationInThread:function(){return this.hasSlotContent?(this.isFocused,s.c.LAST):this.isFocused?s.c.ONLY:this.isExpanded&&this.hasContents?s.c.ONLY:s.c.LAST}}),methods:{removeFocus:function(){this.isFocused=!1,this.isExpanded&&this.$emit("remove-focus")},focusedIn:function(t){var e=t.target;this.$refs.avatar.$el!==e&&(document.removeEventListener("click",this.closeFromOutside),document.addEventListener("click",this.closeFromOutside),this.isFocused=!0,this.$emit("focusin"),Object(f.a)(e)||this.$refs.newContent.focusOnContentEditor())},handleSubmit:function(t){this.hasContents?this.addReply(t):this.addReplyFail()},addReply:function(t){var e=this;if(p.a.getInstance().$authorize("create","reply",[this.user],{trigger:t,action:a.p})){this.replyStatus=i.SUBMITTING,this.replyEditorContent=this.editedContents;var n={content:this.editedContents};return this.$store.dispatch(this.storeAction,{content_uuid:this.replyingTo.content_uuid,container_uuid:this.contentContainerByContentUuid(this.replyingTo.content_uuid),content:n,actor_uuid:this.user.uuid,parent_actor_uuid:this.replyingTo.actor_uuid,thread_uuid:this.replyingTo.parent_actor_uuid?this.replyingTo.thread_uuid:this.replyingTo.content_uuid,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearReply()})).catch((function(t){return e.addReplyFail(t)}))}return this.addReplyFail()},addReplyFail:function(t){var e=this;if(this.replyStatus=i.ERROR,setTimeout((function(){e.replyStatus=i.EDITABLE}),3e3),t){if(403!==t.error_status)return Promise.reject(t);var n=JSON.parse(t.message);return"POSTING_BAN_ACTIVE"!==n.error_code?Promise.reject(t):(this.replyErrorMessage=this.$i18n("conversations.posts.ban",{reason:n.message||0}),Promise.reject(t))}return Promise.reject()},handleCancelAction:function(){this.clearReply()},clearReply:function(){var t=this;this.$emit("clear-reply"),this.replyStatus=i.EDITABLE,this.replyEditorContent={},this.removeFocus(),this.$nextTick().then((function(){t.replyEditorContent={},t.editedContents={},t.hasContents=!1,t.isFocused=!1}))},updateContents:function(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping(this.replyingTo.content_uuid,this.replyingTo.thread_uuid)},closeFromOutside:function(t){this.$el.contains(t.target)||(this.hasContents?this.isFocused=!1:this.removeFocus())},focusOnElement:function(t){this.isExpanded&&this.focusedIn(t)}},components:{contentFocusContainerWithActions:b.a,heightTransition:_.a,newContent:m.a,vfAvatar:v.a}},C=(n(697),n(50)),T=Object(C.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-focus-container-with-actions",{staticClass:"vf-content-focus-container--reply-form vf3-reply-with-new",class:{"vf-content-focus-container--reply-form--is-expanded":t.isExpanded,"vf-content-focus-container--reply-form--is-focused":t.isFocused},attrs:{"i18n-prefix":"comments","is-rich-text-enabled":!1,"is-focused":t.isFocused,"has-content-updated":t.hasContents,"error-message":t.replyErrorMessage,"editor-status":t.replyStatus,"is-submit-enabled":!t.isOverCharLimit,"show-user-status":t.isFocused},on:{submit:t.handleSubmit,"cancel-edit":t.handleCancelAction,"actions-focused":t.focusedIn,"remove-focus":t.removeFocus,"focus-on-element":t.focusOnElement}},[n("div",{staticClass:"vf3-reply-with-new__content"},[t._t("default"),t._v(" "),n("height-transition",[t.isExpanded?n("new-content",{ref:"newContent",staticClass:"vf3-reply-with-new__form",class:{"vf3-reply-with-new__form--expanded":t.isExpanded,"vf3-reply-with-new__form--expanded--replyingTo":t.isExpanded&&t.hasSlotContent,"vf3-reply-with-new__form--unfocused--expanded--withContent":!t.isFocused&&t.isExpanded&&t.hasContents},attrs:{placeholder:t.$i18n("conversations.rich_text.reply_placeholder"),user:t.user,"is-rich-text-enabled":!1,"is-focused":t.isFocused,"avatar-size":t.avatarSize,"editor-status":t.replyStatus,"location-in-thread":t.localLocationInThread,palette:t.palette,"character-limit":t.characterLimit},on:{"is-over-char-limit":function(e){t.isOverCharLimit=e},"content-update":t.updateContents,"request-submit":t.handleSubmit},nativeOn:{focusin:function(e){return t.focusedIn(e)}},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf3-reply-with-new__avatar",attrs:{user:e,size:i}})]}}],null,!1,3645480504)}):t._e()],1)],2)])}),[],!1,null,"4063c185",null);e.a=T.exports},624:function(t,e,n){"use strict";var i=n(559),r={props:{isTyping:Boolean},computed:{a11yLabel:function(){return""}},components:{contentBadge:i.a}},o=(n(698),n(50)),s=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"grow"}},[this.isTyping?e("content-badge",{attrs:{count:0,"a11y-label":this.a11yLabel,"is-typing":this.isTyping,"has-realtime":!1}}):this._e()],1)}),[],!1,null,"062c3592",null);e.a=s.exports},628:function(t,e,n){"use strict";var i,r=n(0),o=n(5);function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a="facebook",c="twitter",u=(s(i={},"email","comment_share_email"),s(i,a,"comment_share_facebook"),s(i,c,"comment_share_twitter"),s(i,"DEFAULT","comment_share"),i),l=n(13);n.d(e,"a",(function(){return d}));var d=function(t){var e=o.vuexStore.getInstance().getters[r.eb],n=u[t]||u.DEFAULT,i=e.uuid,s="medium=".concat(n);return Object(l.D)(e)&&(s+="|sharer_uuid=".concat(i)),s}},640:function(t,e,n){"use strict";n.r(e);n(23),n(4);var i=n(0),r=n(3),o=n(286),s=n(2),a=n(135),c=n(457),u=n(462),l=n(641),d=n(592),f=n.n(d),h=n(440),p=Object(h.c)("bell_icon",f.a),b=n(441),m={props:{floating:{type:String,default:"false"}},created:function(){this.MAXIMUM_BEFORE_TRUNCATION=9},mounted:function(){var t=this;window.vf.context.init(a.a.NOTIFICATIONS),this.trackAction("loaded"),this.$publish(s.G.CHANNEL,s.G.EVENTS.LOADED,this),this.$subscribe(s.G.CHANNEL,s.G.EVENTS.HIDE,(function(){t.hidden=t.isFloating})),this.$subscribe(s.G.CHANNEL,s.G.EVENTS.UNHIDE,(function(){setTimeout((function(){t.hidden=!1}),250)}))},data:function(){return{dataVfId:-1,hidden:!1}},computed:{countBadgeSize:function(){return this.isFloating?o.a.SMALL:o.a.TINY},isFloating:function(){return"true"===this.floating},currentUserUuid:function(){return this.$store.getters[i.fb]},count:function(){return this.$store.getters[i.hc](this.currentUserUuid)},ariaCount:function(){return this.$i18n("aria.new_notifications",{num:this.count.toString()})},ariaLabel:function(){return this.$i18n("aria.open_tray")},classes:function(){return{"vf-tray-trigger":!0,"vf-offscreen-text":this.hidden,floating:this.isFloating,"vf-tray-trigger--floating":this.isFloating}},countClasses:function(){return{"vf-tray-count":!0,"vf-tray-count--floating":this.isFloating,"vf-tray-count--has-plus":this.count>9}}},methods:{trackAction:function(t){return this.$store.dispatch(r.ed,{ui_action:t,ui_component:"indicator"})},toggle:function(){this.trackAction("clicked"),this.$publish(s.A.CHANNEL,s.A.EVENTS.TOGGLE,this.$el),this.$publish(s.G.CHANNEL,s.G.EVENTS.CLICKED)},trayIntent:function(){this.$publish(s.A.CHANNEL,s.A.EVENTS.OPEN_INTENT)}},components:{roundCountBadge:l.a,vfBellIcon:p,vfButton:b.a},directives:{hovered:u.a,innerFocus:c.a}},v=(n(593),n(50)),_=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{directives:[{name:"hovered",rawName:"v-hovered",value:t.trayIntent,expression:"trayIntent"},{name:"inner-focus",rawName:"v-inner-focus",value:t.trayIntent,expression:"trayIntent"}],class:t.classes,attrs:{"aria-label":t.ariaLabel,"data-vf-id":t.dataVfId},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggle(e)}}},[n("round-count-badge",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],class:t.countClasses,attrs:{count:t.count,max:t.MAXIMUM_BEFORE_TRUNCATION,"aria-label":t.ariaCount,size:t.countBadgeSize}}),t._v(" "),n("vf-bell-icon",{staticClass:"vf-icon-medium"})],1)}),[],!1,null,"934cf09e",null);e.default=_.exports},661:function(t,e,n){"use strict";var i=n(505);n.n(i).a},671:function(t,e,n){"use strict";var i=n(506);n.n(i).a},675:function(t,e,n){"use strict";var i=n(507);n.n(i).a},677:function(t,e,n){"use strict";var i=n(508);n.n(i).a},679:function(t,e,n){"use strict";var i=n(510);n.n(i).a},681:function(t,e,n){"use strict";var i=n(511);n.n(i).a},682:function(t,e,n){"use strict";var i=n(512);n.n(i).a},683:function(t,e,n){"use strict";var i=n(514);n.n(i).a},686:function(t,e,n){"use strict";var i=n(515);n.n(i).a},687:function(t,e,n){"use strict";var i=n(516);n.n(i).a},688:function(t,e,n){"use strict";var i=n(517);n.n(i).a},689:function(t,e,n){"use strict";var i=n(518);n.n(i).a},692:function(t,e,n){"use strict";var i=n(521);n.n(i).a},695:function(t,e,n){"use strict";var i=n(524);n.n(i).a},696:function(t,e,n){"use strict";var i=n(525);n.n(i).a},697:function(t,e,n){"use strict";var i=n(526);n.n(i).a},698:function(t,e,n){"use strict";var i=n(527);n.n(i).a},699:function(t,e,n){"use strict";var i=n(528);n.n(i).a},700:function(t,e,n){"use strict";var i=n(529);n.n(i).a},701:function(t,e,n){"use strict";var i=n(530);n.n(i).a},703:function(t,e,n){"use strict";var i=n(531);n.n(i).a},704:function(t,e,n){"use strict";var i=n(532);n.n(i).a},708:function(t,e,n){"use strict";var i=n(533);n.n(i).a},709:function(t,e,n){"use strict";var i=n(534);n.n(i).a},710:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(13),o=n(22),s=n(589),a=function(t,e){var n=t.getters,a=Object(s.a)({getters:n},e),c=Object(o.a)((function(){return n[i.eb]})),u=Object(o.a)((function(){return Object(r.F)(c.value)})),l=Object(o.a)((function(){return a.isMuted.value})),d=Object(o.a)((function(){return!u.value&&a.isDeleted.value})),f=Object(o.a)((function(){return!u.value&&!a.isByCurrentUser.value&&(a.isDisabled.value||a.isSpam.value||a.isActorHideBanned.value||a.isActorGhostBanned.value)}));return{isDeletedStub:d,isDisabledStub:f,isMutedStub:l,isStubbed:Object(o.a)((function(){return d.value||f.value||l.value}))}}},711:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(0),r=n(67),o=n(13),s=n(22),a=n(589),c=function(t,e){var n=t.getters,c=Object(a.a)({getters:n},e),u=Object(s.a)((function(){return n[i.eb]})),l=Object(s.a)((function(){return n[i.P](e)})),d=Object(s.a)((function(){return n[i.dd](l.value)})),f=Object(s.a)((function(){return Object(o.F)(u.value)})),h=Object(s.a)((function(){return c.isDeleted.value})),p=Object(s.a)((function(){return c.isEdited.value})),b=Object(s.a)((function(){return f.value&&d.value.ban_level!==r.a.NONE})),m=Object(s.a)((function(){return f.value&&c.isActorGhostBanned.value})),v=Object(s.a)((function(){return!f.value&&c.isPending.value})),_=Object(s.a)((function(){return!f.value&&!c.isActorGhostBanned.value&&(c.isDisabled.value||c.isSpam.value&&!c.isByCurrentUser.value)}));return{hasBannedBadge:b,hasGhostBannedBadge:m,hasDeletedBadge:h,hasDisabledBadge:_,hasPendingBadge:v,hasEditedBadge:p,isBadged:Object(s.a)((function(){return b.value||h.value||_.value||v.value||p.value}))}}},715:function(t,e,n){"use strict";var i=n(535);n.n(i).a},716:function(t,e,n){"use strict";var i=n(536);n.n(i).a},720:function(t,e,n){"use strict";var i=n(538);n.n(i).a},721:function(t,e,n){"use strict";var i=n(539);n.n(i).a},725:function(t,e,n){"use strict";var i=n(540);n.n(i).a},726:function(t,e,n){"use strict";var i=n(541);n.n(i).a},728:function(t,e,n){"use strict";var i=n(543);n.n(i).a},738:function(t,e,n){"use strict";var i=n(544);n.n(i).a},739:function(t,e,n){"use strict";var i=n(545);n.n(i).a},742:function(t,e,n){"use strict";var i=n(546);n.n(i).a},760:function(t,e,n){"use strict";var i=n(547);n.n(i).a},787:function(t,e,n){"use strict";var i=n(549);n.n(i).a},788:function(t,e,n){},789:function(t,e,n){},790:function(t,e,n){},791:function(t,e,n){},792:function(t,e,n){},793:function(t,e,n){},794:function(t,e,n){},795:function(t,e,n){},796:function(t,e,n){},868:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(36),n(37);var i=n(0),r=n(67),o=n(289),s=n(452),a=n(138),c=n(217),u=n(446),l=n(441),d={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},f=n(50),h=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-disabled"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.disabled"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,p=(n(88),n(537)),b={props:{flagCount:{type:Number,required:!0}},created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfFlagIcon:p.a,vfButton:l.a}},m=(n(720),Object(f.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-flagged"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.flagged_aria_label",{count:t.flagCount})}},[n("vf-flag-icon",{staticClass:"vf-moderation-flagged__icon vf-icon-small"}),t._v("\n        "+t._s(t.$i18n("conversations.moderation.flagged",{count:t.flagCount}))+"\n    ")],1),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unflag"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,"090ed0fb",null).exports),v={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},_=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-pending"},[n("square-badge",{attrs:{palette:t.PALETTES.WARNING,"aria-label":t.$i18n("conversations.moderation.pending_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.pending"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.enable"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.disable"))+"\n    ")])],1)}),[],!1,null,null,null).exports,g={created:function(){this.CONTENT_ACTIONS=s.a},inject:[c.a],components:{squareBadge:u.a,vfButton:l.a}},y=Object(f.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-spam"},[n("square-badge",{attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.spam_aria_label")}},[t._v("\n        "+t._s(t.$i18n("conversations.moderation.spam"))+"\n    ")]),t._v(" "),n("vf-button",{staticClass:"vf-button-outline vf-grey vf-label vf-label-upper",nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}},[t._v("\n        "+t._s(t.$i18n("conversations.actions.unspam"))+"\n    ")])],1)}),[],!1,null,null,null).exports,O=(n(28),n(23),n(15),n(27),n(30),n(285));function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var A={functional:!0,render:function(t,e){var n=e.data,i=e.parent;return t(u.a,{class:[n.staticClass].concat(S(n.class||[])),props:{palette:O.a.WARNING,ariaLabel:i.$i18n("conversations.moderation.unavailable_aria_label")},attrs:C({},n.attrs||[])},[i.$i18n("conversations.moderation.unavailable")])}},w=Object(f.a)(A,void 0,void 0,!1,null,null,null).exports;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N={props:{content:{type:Object,required:!0}},created:function(){this.CONTENT_ACTIONS=s.a},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.c)({currentUser:i.eb}),{isDisabled:function(){return this.content.state_reasons.includes(r.d.CONTENT_DISABLED)},isPending:function(){return this.content.state_reasons.includes(r.d.CONTENT_AWAITING_MODERATION)},isSpam:function(){return this.content.state_reasons.includes(r.d.CONTENT_MARKED_AS_SPAM)},isFlagged:function(){return this.content.total_flags>0},isUnavailable:function(){return this.content.origin===o.b.NONE}}),components:{vfDisabled:h,vfFlagged:m,vfPending:_,vfSpam:y,vfUnavailable:w}},I=(n(721),Object(f.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-moderation-actions"},[t.isDisabled?n("vf-disabled",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)}}}):t.isPending?n("vf-pending",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.ENABLE)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isSpam?n("vf-spam",{on:{enable:function(e){return t.$emit(t.CONTENT_ACTIONS.UNSPAM)}}}):t.isFlagged?n("vf-flagged",{attrs:{"flag-count":t.content.total_flags},on:{unflag:function(e){return t.$emit(t.CONTENT_ACTIONS.UNFLAG)},disable:function(e){return t.$emit(t.CONTENT_ACTIONS.DISABLE)}}}):t.isUnavailable?n("vf-unavailable"):t._e()],1)}),[],!1,null,"62d811bc",null));e.a=I.exports},869:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18);var i=n(0),r=n(1),o=n(138),s=n(217),a=n(369),c=(n(64),n(93),n(36),n(37),n(609)),u=n(24);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{isFocused:!1}},inject:[s.a,s.e],props:{threadUuid:u.a.uuid.isRequired,contentContainerUuid:u.a.uuid.isRequired,isHeadReply:u.a.bool.def(!1),isReadyForContent:u.a.bool,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired,limit:u.a.number.isRequired,isFetchingContent:u.a.bool.def(!1),isReplyToClickable:u.a.bool},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Pc)]},threadOldContentCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Qc)]},threadRealtimeCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Sc)]},threadPaletteByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Rc)]}}),{},Object(o.c)({mentionNotificationsByThreadUuid:i.Zc}),{thread:function(){return this.threadByUuid(this.threadUuid)},subthreads:function(){return this.thread.selected_content.length>0?this.thread.selected_content:this.thread.visible_content},threadPalette:function(){var t=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.oldMentionCount>0?this.PALETTES.MENTION:this.threadPaletteByUuid(t)},oldMentionsInThread:function(){var t=this;if(this.thread.selected_content.length>0){var e=this.thread.thread_top_uuid===this.contentContainerUuid?this.threadUuid:this.thread.thread_top_uuid;return this.mentionNotificationsByThreadUuid(e).filter((function(e){var n=e.content_uuid;return!t.thread.selected_content.includes(n)}))}return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount:function(){return this.oldMentionsInThread.length},oldReplyCount:function(){return this.thread.selected_content.length>0?1:this.threadOldContentCount(this.threadUuid)},realtimeCount:function(){return this.thread.selected_content.length>0?0:this.threadRealtimeCount(this.threadUuid)}}),methods:{focusedIn:function(){this.isFocused=!0},focusedOut:function(){this.isFocused=!1},removeFocus:function(){var t=Object.values(this.$refs).filter(Boolean).find((function(t){return t.isFocused}));t&&t.removeFocus(),this.isFocused=!1}},components:{vfThread:c.a}},h=n(50),p=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{ref:"thread",attrs:{"thread-uuid":t.threadUuid,subthreads:t.subthreads,"thread-palette":t.threadPalette,"initial-shown-replies":1/0,"is-head-reply":t.isHeadReply,"old-reply-count":t.oldReplyCount,"old-mentions-in-thread":t.oldMentionsInThread,"realtime-count":t.realtimeCount,"is-ready-for-content":t.isReadyForContent,"store-action":t.createAction,"is-focused":t.isFocused,"maximum-content-length":t.maximumContentLength,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.isHeadReply?t.fetchDirectRepliesAction:t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"is-fetching-content":t.isFetchingContent},on:{focusin:t.focusedIn,focusout:t.focusedOut,"remove-focus":t.removeFocus},scopedSlots:t._u([{key:"head",fn:function(e){var i=e.locationInThread;return[n(t.contentComponent,{ref:"threadHead",tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"is-reply":t.isHeadReply,"thread-palette":t.threadPalette,"location-in-thread":i},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}},{key:"reply",fn:function(e){var i=e.threadUuid,r=e.locationInThread;return[n(t.contentComponent,{ref:"reply-"+i,tag:"component",staticClass:"vf-thread__reply",attrs:{"thread-uuid":i,"location-in-thread":r,"thread-palette":t.threadPalette,"is-reply":"","is-reply-to-clickable":t.isReplyToClickable},on:{focusin:t.focusedIn,"remove-focus":t.focusedOut}})]}}])})}),[],!1,null,null,null).exports,b=(n(15),n(27),n(28),n(23),n(30),n(502)),m=n.n(b),v=n(123),_=n(140),g=n(490),y=n(558),O=n(447),E=n(920),C=n(441),T={components:{vfBackIcon:E.a,vfButton:C.a},computed:{size:function(){return v.e?O.b.SMALL:O.b.LARGE}}},S=(n(704),Object(h.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",{staticClass:"vf-back-button vf-label-text",attrs:{size:t.size},nativeOn:{click:function(e){return e.preventDefault(),t.$emit("go-back")}}},[n("span",{staticClass:"vf-back-button__icon-wrapper"},[n("vf-back-icon",{staticClass:"vf-icon-small"})],1),t._v("\n    "+t._s(t.$i18n("conversations.threads.reply_thread.back"))+"\n")])}),[],!1,null,null,null).exports),j=n(557);function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var P={rootMargin:"-50px 0px 0px 0px"},R={props:{isFocused:{type:Boolean,default:!1},currentUser:{type:Object,required:!0},headerText:{type:String,required:!0},labeledBy:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},data:function(){return{hasStickiedHeader:!1}},created:function(){this.isMobileOrTablet=v.e},mounted:function(){var t=this;m.a.add(this.$refs.header),Object(_.d)().then((function(){t.topObserver=Object(_.a)(t.$refs.top,t.handleTopObserved,P),t.bottomObserver=Object(_.a)(t.$refs.bottom,t.handleBottomObserved,P)})),this.scrollToTop(),this.lockBodyScroll(),this.$refs.heading.focus()},beforeDestroy:function(){this.topObserver&&this.topObserver.unobserve(this.$refs.top),this.bottomObserver&&this.bottomObserver.unobserve(this.$refs.bottom),this.unlockBodyScroll(),document.removeEventListener("click",this.emitClose)},destroyed:function(){this.$emit("is-header-sticky",!1)},methods:{scrollToTop:function(){var t=this.$refs.top,e=t.getBoundingClientRect(),n=e.top,i=e.bottom,r=n<0;(window.innerHeight-i<0||r)&&(t.scrollIntoView(!0),document.documentElement.scrollTop-=150,document.body.scrollTop-=150)},lockBodyScroll:function(){v.e&&(this.existingBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden")},unlockBodyScroll:function(){v.e&&(document.body.style.overflow=this.existingBodyOverflow)},handleTopObserved:function(t){var e=A(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.top>r.top&&!v.e&&this.emitClose(),(n||i.top<=r.top)&&(this.hasStickiedHeader=!n),this.$emit("is-header-sticky",this.hasStickiedHeader)},handleBottomObserved:function(t){var e=A(t,1)[0],n=e.isIntersecting,i=e.boundingClientRect,r=e.rootBounds;!n&&i.bottom<r.bottom&&!v.e&&this.emitClose(),this.hasStickiedHeader&&this.$emit("is-header-sticky",n)},handleFocusIn:function(){document.removeEventListener("click",this.emitClose),document.addEventListener("click",this.emitClose)},emitClose:function(){this.$emit("close")}},components:{FocusTrap:g.FocusTrap,contentFocusContainer:y.a,backButton:S,closeButton:j.a}},N=(n(708),Object(h.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("focus-trap",{staticClass:"vf-content-focus-container-modal",attrs:{role:"dialog","aria-modal":"true","deactivate-on-outside-click":"","deactivate-on-esc":"","return-focus-on-deactivate":"","focus-on-activate":!1},on:{deactivated:t.emitClose}},[n("content-focus-container",{attrs:{"is-focused":t.isFocused,"current-user":t.currentUser,"show-mobile-view":""},nativeOn:{focusin:function(e){return t.handleFocusIn(e)},click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{ref:"header",staticClass:"vf-content-focus-container-modal__header",class:{"vf-content-focus-container-modal__header--stickied":t.hasStickiedHeader}},[t.hasBackButton?n("back-button",{on:{"go-back":function(e){return t.$emit("go-back")}}}):t._e(),t._v(" "),n("div",{staticClass:"vf-content-focus-container-modal__header-text-wrapper"},[n("h2",{ref:"heading",staticClass:"vf-content-focus-container-modal__header-text vf-label-text vf-no-outline",attrs:{tabindex:"-1"}},[t._v("\n                        "+t._s(t.headerText)+"\n                    ")])]),t._v(" "),n("div",[n("close-button",{staticClass:"vf-content-focus-container-modal__close-button",attrs:{"aria-label":t.$i18n("conversations.threads.reply_thread.aria_close_label")},on:{close:function(e){return e.stopPropagation(),t.$emit("close")}}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}],null,!0)},[n("div",{ref:"top"}),t._v(" "),t._v(" "),t._t("default"),t._v(" "),t._v(" "),n("div",{ref:"bottom"})],2)],1)}),[],!1,null,"f754273e",null).exports);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D={props:{activeReplyThread:u.a.object.isRequired,limit:u.a.number.isRequired,headerHeightPx:u.a.number,createAction:u.a.string.isRequired,fetchAction:u.a.string.isRequired,fetchRepliesAction:u.a.string.isRequired,fetchDirectRepliesAction:u.a.string.isRequired,fetchSelectedAction:u.a.string.isRequired,maximumContentLength:u.a.number.def(1/0),contentComponent:u.a.object.isRequired},data:function(){return{isReadyForContent:!1,isFetchingContent:!1}},inject:[s.e],created:function(){this.checkForContent()},beforeDestroy:function(){this.thread.selected_content.length&&this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.N),this.activeReplyThread.thread_uuid)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(o.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(i.Pc)]}}),{},Object(o.c)({contentByUuid:i.P,userByUuid:i.ed,currentUser:i.eb}),{threadContent:function(){return this.contentByUuid(this.activeReplyThread.thread_uuid)},thread:function(){return this.threadByUuid(this.activeReplyThread.thread_uuid)},isHeadReply:function(){return this.activeReplyThread.content_container_uuid!==this.activeReplyThread.parent_thread_uuid},repliesGetter:function(){return this.isHeadReply?i.N:"".concat(this.THREAD_NAMESPACE,"/").concat(i.nd)},threadOwner:function(){return this.userByUuid(this.threadContent.actor_uuid)},isReplyToClickable:function(){return this.activeReplyThread.mode!==a.REPLY_THREAD_MODES.REPLY_PARENT}}),methods:{closeReplyThread:function(){this.$store.commit(r.G,this.activeReplyThread.content_container_uuid)},goBack:function(){this.$store.commit(r.ub,this.activeReplyThread.content_container_uuid)},fetchContent:function(){var t=this,e=this.threadContent,n=e.thread_uuid===e.content_container_uuid?this.fetchRepliesAction:this.fetchDirectRepliesAction;this.isFetchingContent=!0,this.$store.dispatch(n,{content_uuid:this.thread.thread_uuid,limit:this.limit,starting_from:this.thread.page_from,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){t.isFetchingContent=!1}))},initializeThread:function(){var t={thread_uuid:this.activeReplyThread.thread_uuid,thread_top_uuid:this.threadContent.thread_uuid,total_content:this.threadContent.total_replies};this.$store.commit("".concat(this.THREAD_NAMESPACE,"/").concat(r.T),t),this.isReadyForContent=!0,this.fetchContent()},fetchSelectedContent:function(){var t=this,e=this.thread.selected_content.filter((function(e){return!t.contentByUuid(e)})).join();e.length>0?this.$store.dispatch(this.fetchAction,{content_container_uuid:this.activeReplyThread.content_container_uuid,content_uuids:e}).then((function(){t.isReadyForContent=!0})):this.isReadyForContent=!0},checkForContent:function(){this.thread?this.thread.selected_content.length>0?this.fetchSelectedContent():this.thread.visible_content.length<this.thread.total_content?(this.isReadyForContent=!0,this.fetchContent()):this.isReadyForContent=!0:this.initializeThread()}},watch:{activeReplyThread:function(){this.isReadyForContent=!1,this.checkForContent(),this.$refs.modal.scrollToTop()}},components:{replyLevelThread:p,replyThreadModal:N}},$=Object(h.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("reply-thread-modal",{ref:"modal",attrs:{"has-back-button":"","is-focused":"","current-user":t.currentUser,"header-text":t.$i18n("conversations.threads.title"),"aria-label":t.isFetchingContent?t.$i18n("conversations.threads.title_loading"):t.$i18n("conversations.threads.title")},on:{"go-back":t.goBack,close:t.closeReplyThread,"is-header-sticky":function(e){return t.$emit("is-reply-thread-header-sticky",e)}}},[n("reply-level-thread",{ref:"replyLevelThread",attrs:{limit:t.limit,"content-container-uuid":t.activeReplyThread.content_container_uuid,"create-action":t.createAction,"fetch-replies-action":t.fetchRepliesAction,"fetch-direct-replies-action":t.fetchDirectRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"maximum-content-length":t.maximumContentLength,"thread-uuid":t.activeReplyThread.thread_uuid,"is-head-reply":t.isHeadReply,"is-ready-for-content":t.isReadyForContent,"header-height-px":t.headerHeightPx,"content-component":t.contentComponent,"is-fetching-content":t.isFetchingContent,"is-reply-to-clickable":t.isReplyToClickable}})],1)}),[],!1,null,null,null);e.a=$.exports},870:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(36),n(37);var i=n(0),r=n(447),o=n(452),s=n(138),a=n(13),c=n(123),u=n(921),l=n(922),d=n(967),f=(n(43),n(441)),h=n(639),p=n(969),b=n(970),m=n(971),v=n(48),_=n(628),g=n(590),y=n(635),O=n.n(y),E=n(24),C=n(499),T=n(972),S={data:function(){return{isCopied:!1}},props:{url:E.a.string.isRequired},created:function(){this.copyIcon=T.a},mounted:function(){var t=this;this.isCopied=!1,setTimeout((function(){t.clipboard=new O.a(t.$el,{container:t.$el}),t.clipboard.on("success",(function(){t.isCopied=!0,setTimeout((function(){t.isCopied=!1}),3e3)}))}),0)},destroyed:function(){this.clipboard&&this.clipboard.destroy()},components:{dropdownButton:C.a}},j=n(50),A=Object(j.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isCopied?n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{icon:t.copyIcon}},[t._v("\n    "+t._s(t.$i18n("conversations.actions.copied"))+"\n")]):n("dropdown-button",{staticClass:"vf-dropdown__list-item-button vf-dropdown-list__accent-hover-button vf-no-outline vf-horiz-list vf-action-button js-list-link vf-icon-button",attrs:{"data-clipboard-text":t.url,icon:t.copyIcon}},[t._v("\n    "+t._s(t.$i18n("conversations.actions.copy_url"))+"\n")])}),[],!1,null,null,null).exports;function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var R="facebook",N="twitter",I="email",U="url",D=[{key:R,value:"conversations.actions.facebook",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:p.a},{key:N,value:"conversations.actions.twitter",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:b.a},{key:I,value:"conversations.actions.email",buttonClass:"vf-horiz-list vf-action-button js-list-link vf-icon-button",icon:m.a},{key:U,value:"conversations.actions.copy_url"}],$={props:{contentUuid:E.a.uuid.isRequired,contentType:E.a.string.isRequired},created:function(){this.PALETTES=r.a,this.copyUrlKey=U},data:function(){return{isDropdownOpen:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)({locations:i.Ac}),{shareOptions:function(){var t=this;return D.map((function(e){return Object.assign({},e,{value:t.$i18n(e.value)})}))},checkOutText:function(){return this.$i18n("social.check_out",{content_type:this.contentType})},facebookUrl:function(){var t={u:this.buildShareLink(g.a.FACEBOOK)};return Object(v.c)("http://www.facebook.com/sharer/sharer.php",{queryParams:t})},twitterUrl:function(){var t=this.buildShareLink(g.a.TWITTER),e={text:"".concat(this.checkOutText,": ").concat(t)};return Object(v.c)("https://twitter.com/intent/tweet",{queryParams:e})},emailUrl:function(){var t=this.buildShareLink(g.a.EMAIL),e=encodeURIComponent(this.checkOutText),n=encodeURIComponent(this.$i18n("social.email_body",{url:t,content_type:this.contentType}));return"".concat("mailto",":?subject=").concat(e,"&body=").concat(n)},buttonProps:function(){return{class:"vf-label-upper",size:"inline"}}}),methods:{toggleOnEnter:function(t){this.isDropdownOpen=t},toggleDropdown:function(){this.isDropdownOpen=!this.isDropdownOpen},hide:function(){this.isDropdownOpen=!1},onAction:function(t){switch(t.key){case R:this.openShareLink(this.facebookUrl,"Facebook");break;case N:this.openShareLink(this.twitterUrl,"Twitter");break;case I:location.href=this.emailUrl}},buildShareLink:function(t){var e=new URL(this.locations.origin_url);return e.searchParams.append("__vfz",Object(_.a)(t)),e.hash="vf-".concat(this.contentUuid),e.href},openShareLink:function(t,e){window.open(t,e,"status = 1, height = 350, width = 550, resizable = 0")}},components:{vfButton:f.a,listDropdown:h.a,copyUrlButton:A}},k=(n(715),Object(j.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("list-dropdown",{staticClass:"vf-share-menu",attrs:{items:t.shareOptions,"enable-hover-light":!1,"button-properties":t.buttonProps,positions:["bottom-left"],"is-dropdown-open":t.isDropdownOpen},on:{hide:t.hide,"list-item-clicked":t.onAction},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("vf-button",{staticClass:"vf-label vf-label-upper vf-share-menu__trigger",attrs:{palette:t.PALETTES.ACCENT,size:"inline","is-link":"","is-inverted":""},nativeOn:{"&click":function(e){return t.toggleDropdown(e)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.share"))+"\n        ")])]},proxy:!0},{key:t.copyUrlKey,fn:function(){return[n("copy-url-button",{attrs:{url:t.buildShareLink()}})]},proxy:!0}],null,!0)})}),[],!1,null,"1ffe2b5e",null).exports);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=Object(f.b)(u.a),M=Object(f.b)(l.a),F={props:{isReplyEnabled:E.a.bool,areRepliesEnabled:E.a.bool,isLikeEnabled:E.a.bool,isDislikeEnabled:E.a.bool,isShareEnabled:E.a.bool.def(!1),isFlagEnabled:E.a.bool.def(!1),isEntered:E.a.bool.def(!1),content:E.a.object,contentType:E.a.string},created:function(){this.CONTENT_ACTIONS=o.a,this.PALETTES=r.a,this.isMobileOrTablet=c.e},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.c)({currentUser:i.eb,siteSettings:i.Dc,getUserByUuid:i.ed}),{contentActor:function(){return this.getUserByUuid(this.content.actor_uuid)},isContentDislikable:function(){return Boolean(this.siteSettings.enable_dislikes)},isContentFlaggable:function(){return Object(a.f)(this.currentUser,this.siteSettings,this.contentActor)},numOfReplies:function(){return this.content.total_replies},isLiked:function(){return this.content.actions.includes(o.a.LIKE)},isDisliked:function(){return this.content.actions.includes(o.a.DISLIKE)},isFlagged:function(){return this.content.actions.includes(o.a.FLAG)},flagText:function(){return this.isFlagged?this.$i18n("conversations.posts.flag.past"):this.$i18n("conversations.posts.flag.verb")},likeLabel:function(){return this.isLiked?this.$i18n("conversations.posts.unlike_aria_label",{count:this.content.total_likes}):this.$i18n("conversations.posts.like_aria_label",{count:this.content.total_likes})},dislikeLabel:function(){return this.isLiked?this.$i18n("conversations.posts.undislike_aria_label",{count:this.content.total_likes}):this.$i18n("conversations.posts.dislike_aria_label",{count:this.content.total_likes})}}),methods:{getFlagPalette:function(t){return t?r.a.DANGER:r.a.ACCENT}},components:{countButton:d.a,dislikeButton:B,likeButton:M,shareMenu:k,vfButton:f.a}},H=(n(716),Object(j.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-content-actions",class:{"vf-content-actions--entered":t.isEntered||t.isMobileOrTablet}},[n("div",{staticClass:"vf-content-actions__left-actions vf-horiz-list"},[t.isReplyEnabled?n("vf-button",{staticClass:"vf-content-actions__left-action vf-content-actions__reply vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.reply_aria_label"),palette:t.PALETTES.ACCENT},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.REPLY)}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.verb"))+"\n        ")]):t._e(),t._v(" "),t.areRepliesEnabled&&t.numOfReplies>0?n("count-button",{staticClass:"vf-content-actions__left-action vf-content-actions__replies vf-label is-size-inline is-link is-accent-color",attrs:{"aria-label":t.$i18n("conversations.posts.replies_aria_label",{count:t.numOfReplies}),count:t.numOfReplies},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit(t.CONTENT_ACTIONS.REPLIES)},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._v("\n            "+t._s(t.$i18n("conversations.posts.reply.noun",{count:t.numOfReplies}))+"\n        ")]):t._e(),t._v(" "),t.isLikeEnabled?n("like-button",{staticClass:"vf-content-actions__left-action vf-content-actions__like vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__like--liked":t.isLiked},attrs:{size:"vf-icon-small","aria-label":t.likeLabel,text:t.content.total_likes.toString()},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_LIKE)}}}):t._e(),t._v(" "),t.isDislikeEnabled&&t.isContentDislikable?n("dislike-button",{staticClass:"vf-content-actions__left-action vf-content-actions__dislike vf-label is-size-inline is-link is-accent-color is-inverted",class:{"vf-content-actions__dislike--disliked":t.isDisliked},attrs:{size:"vf-icon-small","aria-label":t.dislikeLabel,text:t.content.total_dislikes.toString()},nativeOn:{click:function(e){return t.$emit(t.CONTENT_ACTIONS.TOGGLE_DISLIKE)}}}):t._e()],1),t._v(" "),n("div",{staticClass:"vf-content-actions__right-actions vf-horiz-list",class:{"vf-content-actions__right-actions--desktop":!t.isMobileOrTablet}},[t.isShareEnabled?n("share-menu",{staticClass:"vf-content-actions__share",attrs:{"content-uuid":t.content.content_uuid,"content-type":t.contentType}}):t._e(),t._v(" "),!t.isMobileOrTablet&&t.isFlagEnabled&&t.isContentFlaggable?n("vf-button",{staticClass:"vf-content-actions__flag vf-label is-size-inline is-link is-accent-color",class:{"vf-content-actions__flag--flagged":t.isFlagged},attrs:{palette:t.getFlagPalette(t.isFlagged),"is-inverted":!t.isFlagged},nativeOn:{click:function(e){!t.isFlagged&&t.$emit(t.CONTENT_ACTIONS.FLAG)}}},[t._v("\n            "+t._s(t.flagText)+"\n        ")]):t._e()],1)])}),[],!1,null,"0ca267c8",null));e.a=H.exports},872:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(28);var i=n(0),r=n(289),o=n(57),s=n(2),a=n(288),c=n(123),u=n(138),l=n(950),d=n(217),f=n(461),h=n(24),p={props:{replyName:h.a.string,isEntered:h.a.bool.def(!1),isClickable:h.a.bool},inject:[d.b,d.a],computed:{palette:function(){return this.hasEnteredState?this.PALETTES.ACCENT:this.PALETTES.NONE},hasEnteredState:function(){return this.isEntered||c.e}},components:{vfButton:f.a}},b=(n(738),n(50)),m=Object(b.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isClickable?n("vf-button",{staticClass:"vf-reply-to vf-reply-to--clickable vf-label-text vf-label-text--default-case",class:{"vf-reply-to--entered":t.hasEnteredState},attrs:{size:t.SIZES.INLINE,palette:t.palette,"aria-label":t.$i18n("conversations.reply_to.reply_to_button_aria_label",{user:t.replyName}),"is-link":""},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("reply-to-clicked")}}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))]),t._v(" "),t.isEntered?n("span",[t._v(" - "+t._s(t.$i18n("conversations.reply_to.view_message")))]):t._e()]):n("span",{staticClass:"vf-reply-to vf-label-text vf-label-text--default-case",attrs:{"aria-label":t.$i18n("conversations.reply_to.reply_to_aria_label",{user:t.replyName})}},[t._v("\n    "+t._s(t.$i18n("conversations.reply_to.reply_to"))+"\n    "),n("span",{staticClass:"vf-reply-to__reply-name"},[t._v(" "+t._s(t.replyName))])])}),[],!1,null,"f0e7ebf4",null).exports,v=n(13);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={props:{contentUuid:h.a.uuid.isRequired,userUuid:h.a.string.def(o.b),isPinned:h.a.bool.def(!1),isFromUser:h.a.bool.def(!1),isModBadgeEnabled:h.a.bool,customBadges:h.a.array,hasAuthorBadge:h.a.bool.def(!1),isReply:h.a.bool.def(!1),replyName:h.a.string,isReplyToEditedPost:h.a.bool.def(!1),isEntered:h.a.bool.def(!1),isReplyToClickable:h.a.bool},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.c)({userByOrigin:i.dd,getRelativeTime:i.rc,contentByUuid:i.P,userByUuid:i.ed,currentUserUuid:i.fb,isCurrentUserModOrAdmin:i.Mb}),{user:function(){return this.userByOrigin({actor_uuid:this.userUuid,origin:this.content.origin})},isModOrAdmin:function(){return this.isModBadgeEnabled&&Object(v.F)(this.user)},isTrustedUser:function(){return this.$can("trust","user",this.user)},content:function(){return this.contentByUuid(this.contentUuid)},name:function(){switch(this.content?this.content.origin:"none"){case r.b.TWITTER:return this.$i18n("social.twitter");default:return this.user.name}},timestamp:function(){return this.content?this.content.time:null},timeString:function(){return this.content?this.getRelativeTime(this.content.time):""},isEditorPicked:function(){return Boolean(this.content&&this.content.is_picked)},classes:function(){return{"vf-post-details--mobile":c.e}},postNameButtonClasses:function(){return g({},a.b,this.isFromUser)}}),methods:{displayProfile:function(t,e){var n=this,i=t.currentTarget,r=e||this.user;setTimeout((function(){n.$publish(s.r.CHANNEL,s.r.EVENTS.SHOW,i,r)}))}},components:{postDetails:l.a,replyTo:m}},O=(n(739),Object(b.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("post-details",{staticClass:"vf-post-details",class:t.classes,attrs:{name:t.name,"time-string":t.timeString,timestamp:t.timestamp,"are-names-clickable":t.isFromUser,"is-by-page-author":t.hasAuthorBadge,"is-by-mod-or-admin":t.isModOrAdmin,"is-by-trusted-user":t.isTrustedUser,"is-editors-pick":t.isEditorPicked,"custom-badges":t.customBadges,"is-pinned":t.isPinned,"is-reply-to-edited-post":t.isReplyToEditedPost,"post-name-button-classes":t.postNameButtonClasses},on:{"username-clicked":t.displayProfile}}),t._v(" "),t.isReply?n("reply-to",{attrs:{"reply-name":t.replyName,"is-entered":t.isEntered,"is-clickable":t.isReplyToClickable},on:{"reply-to-clicked":function(e){return t.$emit("reply-to-clicked")}}}):t._e()],1)}),[],!1,null,"0d623d5a",null));e.a=O.exports},876:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(88);var i=n(468),r=n(0),o=n(217),s=n(291),a=n(445),c=n(447),u=n(2),l=n(503),d=n(13),f=n(123),h=n(138),p=(n(106),n(149)),b=n(292),m=n(72),v=n(125),_=n(441),g=n(463),y=n(465),O=n(558),E=n(618),C=n(608);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(){Object(b.a)({content_container_uuid:this.contentContainerUuid,section_uuid:this.$store.getters[r.uc](this.contentContainerUuid),content_uuid:this.contentContainerUuid,thread_uuid:this.contentContainerUuid}).then((function(t){}))}var A={props:{user:{},contentContainerUuid:{type:String,required:!0},placeholder:{type:String,required:!0},storeAction:{type:String,required:!0},isRichTextEnabled:{type:Boolean,default:!0},characterLimit:Number,isExpired:{type:Boolean,default:!1},expiryNotice:{type:String}},inject:[o.a,o.e],data:function(){return{isFocused:!1,hasContents:!1,isOverCharLimit:!1,editedContents:{},contentStatus:i.EDITABLE,isSigningOut:!1}},mounted:function(){this.signalTyping=Object(p.d)(j,s.a)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(h.c)({settings:r.Dc,currentUser:r.eb}),{isLoggedIn:function(){return Object(d.D)(this.user)},areAuthActionsEnabled:function(){return!this.isFocused&&!this.hasContents&&!this.isExpired},authActionButtonProps:function(){var t=f.e?c.b.SMALL:c.b.LARGE;return{palette:this.PALETTES.ACCENT,"is-link":!0,size:t}},computedPlaceholder:function(){return this.isExpired?this.expiryNotice:this.placeholder}}),methods:{removeFocus:function(){this.isFocused=!1,document.removeEventListener("click",this.closeFromOutside)},focusedIn:function(t){var e=this,n=t.target;this.$refs.signUpButton&&this.$refs.signUpButton.$el===n||this.$refs.signInButton&&this.$refs.signInButton.$el===n||this.$refs.signOutButton&&this.$refs.signOutButton.$el===n||this.$refs.avatar.$el===n||this.isExpired||(this.isFocused=!0,setTimeout((function(){document.removeEventListener("click",e.closeFromOutside),document.addEventListener("click",e.closeFromOutside)})),Object(l.a)(n)||this.$refs.newContent.focusOnContentEditor())},handleSubmit:function(t){this.hasContents&&!this.hasPendingUploads(this.editedContents)?this.createPost(t):this.handleError()},updateContents:function(t,e){this.hasContents=t,this.editedContents=e,this.signalTyping()},createPost:function(t){var e=this;if(v.a.getInstance().$authorize("create","live-content",[this.user,this.settings],{trigger:t,action:a.f})){this.contentStatus=i.SUBMITTING;var n=this.isRichTextEnabled?this.editedContents:{content:this.editedContents};this.$store.dispatch(this.storeAction,{container_uuid:this.contentContainerUuid,content:n,THREAD_NAMESPACE:this.THREAD_NAMESPACE}).then((function(){e.clearPost(),e.$emit("on-content-created")})).catch((function(){e.handleError()}))}},handleError:function(){var t=this;this.contentStatus=i.ERROR,setTimeout((function(){t.contentStatus=i.EDITABLE}),3e3)},clearPost:function(){this.contentStatus=i.EDITABLE,this.$refs.newContent.clearContent(),this.editedContents={},this.hasContents=!1,this.removeFocus()},hasPendingUploads:function(t){var e=t.content;return!(!e||!this.isRichTextEnabled)&&JSON.parse(e).ops.filter((function(t){return Object(m.b)(["insert","image-upload"],t)})).filter((function(t){return!Object(m.b)(["insert","image-upload","mediaUuid"],t)})).length>0},closeFromOutside:function(t){this.$el.contains(t.target)||this.removeFocus()},handleSignOutClick:function(){this.isSigningOut=!0,this.$publish(u.b.CHANNEL,u.b.EVENTS.LOGOUT)},handleSignInClick:function(){this.$publish(u.b.CHANNEL,u.b.EVENTS.REQUIRED,{trigger:this.$refs.signInButton.$el,method:u.b.METHODS.LOGIN})},handleSignUpClick:function(){this.$publish(u.b.CHANNEL,u.b.EVENTS.REQUIRED,{trigger:this.$refs.signUpButton.$el,method:u.b.METHODS.SIGNUP})}},watch:{isLoggedIn:function(){this.isSigningOut=!1}},components:{contentFocusContainer:O.a,heightTransition:y.a,newContent:E.a,vfButton:_.a,contentFocusContainerFooter:C.a,vfAvatar:g.a}},w=(n(689),n(50)),P=Object(w.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("height-transition",[n("content-focus-container",{staticClass:"vf-post-form vf-post-form__container vf-post-form__content-container",class:{"vf-post-form__container--focused":t.isFocused},attrs:{"is-focused":t.isFocused,"is-default-container":!1,"current-user":t.currentUser},on:{"remove-focus":t.removeFocus,"focus-on-element":t.focusedIn},nativeOn:{focusin:function(e){return t.focusedIn(e)}}},[n("new-content",{ref:"newContent",staticClass:"vf-post-form__new-content",class:{"vf-post-form__new-content__is-logged-in":t.isLoggedIn&&t.areAuthActionsEnabled,"vf-post-form__new-content__disabled":t.isExpired},attrs:{"location-in-thread":"only",user:t.user,"editor-status":t.contentStatus,"is-rich-text-enabled":t.isRichTextEnabled,"is-focused":t.isFocused,"content-container-uuid":t.contentContainerUuid,placeholder:t.computedPlaceholder,"character-limit":t.characterLimit,"is-disabled":t.isExpired},on:{"content-update":t.updateContents,"is-over-char-limit":function(e){t.isOverCharLimit=e},"request-submit":t.handleSubmit},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.user,i=t.size;return[n("vf-avatar",{ref:"avatar",staticClass:"vf-post-form__avatar",attrs:{user:e,size:i}})]}},{key:"footer",fn:function(){return[n("content-focus-container-footer",{attrs:{"show-user-status":"","is-focused":t.isFocused,"has-content-updated":t.hasContents,"has-editable-contents":t.hasContents,"is-submit-enabled":!t.hasPendingUploads(t.editedContents)&&!t.isOverCharLimit&&!t.isExpired,"editor-status":t.contentStatus},on:{submit:t.handleSubmit,"cancel-edit":t.clearPost}})]},proxy:!0}])},[t._v(" "),t.areAuthActionsEnabled?n("div",{staticClass:"vf-post-form__auth-actions vf-label vf-label-upper"},[t.isLoggedIn?n("vf-button",t._b({ref:"signOutButton",staticClass:"vf-post-form__sign-out-action",attrs:{disabled:t.isSigningOut},nativeOn:{click:function(e){return t.handleSignOutClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n                    "+t._s(t.$i18n("settings.controls.logout"))+"\n                ")]):[n("vf-button",t._b({ref:"signInButton",staticClass:"vf-post-form__sign-in-action",nativeOn:{click:function(e){return t.handleSignInClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n                        "+t._s(t.$i18n("feed.account.nav.login"))+"\n                    ")]),t._v(" "),n("span",{staticClass:"vf-post-form__auth-action-separator"},[t._v("|")]),t._v(" "),n("vf-button",t._b({ref:"signUpButton",staticClass:"vf-post-form__sign-up-action",nativeOn:{click:function(e){return t.handleSignUpClick(e)}}},"vf-button",t.authActionButtonProps,!1),[t._v("\n                        "+t._s(t.$i18n("feed.account.nav.signup"))+"\n                    ")])]],2):t._e()])],1)],1)}),[],!1,null,"0516c2b7",null);e.a=P.exports},877:function(t,e,n){"use strict";var i=n(447),r=n(185),o=n(456),s={props:{errorAriaLabel:{type:String,required:!0},isLoading:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1}},created:function(){this.STATUSES=r.a},computed:{status:function(){return this.hasError?r.a.ERROR:this.isLoading?r.a.PENDING:r.a.NONE},palette:function(){return this.status===r.a.ERROR?i.a.DANGER:i.a.ACCENT}},components:{loaderButton:o.a}},a=(n(692),n(50)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vf-load-more vf-label-text"},[n("loader-button",{staticClass:"vf-load-more__button",attrs:{palette:t.palette,status:t.status,"is-inverted":t.status===t.STATUSES.NONE,size:"small","is-cta":"","is-full-width":""},nativeOn:{click:function(e){return t.$emit("load-more")},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[t._t("default"),t._v(" "),t.hasError?n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n            "+t._s(t.errorAriaLabel)+"\n        ")]):t._e()],2)],1)}),[],!1,null,"d14a7954",null);e.a=c.exports},880:function(t,e,n){"use strict";var i=n(286),r=n(446),o=n(574),s=n(24),a={props:{count:s.a.number,text:s.a.string.isRequired,ariaLabel:s.a.string.isRequired,hasNewContent:s.a.bool.def(!1),isInsideTrigger:s.a.bool.def(!1),isInsideDropdown:s.a.bool.def(!1)},inject:{size:{default:i.a.SMALL},components:{default:{squareBadge:r.a,unseenNotifier:o.a}}}},c=(n(760),n(50)),u=Object(c.a)(a,(function(t,e){var n=e._c;return n("span",{class:{"vf-nav-label vf-nav-tab-button":!e.props.isInsideTrigger&&!e.props.isInsideDropdown,"vf-nav-tab-button--inside-trigger":e.props.isInsideTrigger,"vf-nav-tab-button--inside-dropdown":e.props.isInsideDropdown},attrs:{"aria-label":e.ariaLabel}},[n("span",{class:{"vf-label-text vf-nav-tab-button__text":!e.props.isInsideDropdown&&!e.props.isInsideTrigger}},[e._v("\n        "+e._s(e.props.text)+"\n    ")]),e._v(" "),e.props.count?n(e.injections.components.squareBadge,{tag:"component",staticClass:"vf-nav-tab-button__badge",attrs:{"aria-hidden":"true",size:e.injections.size,disabled:!0}},[e._v("\n        "+e._s(e.props.count)+"\n    ")]):e._e(),e._v(" "),e.props.hasNewContent?n(e.injections.components.unseenNotifier,{tag:"component",staticClass:"vf-nav-tab-button__unseen-notifier",attrs:{"aria-hidden":"true"}}):e._e()],1)}),[],!0,null,"6aa5e52a",null);e.a=u.exports},882:function(t,e,n){"use strict";var i=n(217),r=n(457),o=n(462),s=n(461),a={data:function(){return{isEntered:!1,wasJustClicked:!1}},inject:[i.b,i.a],props:{isFollowing:{type:Boolean,required:!0},unfollowText:{type:String,required:!0},isFollowingText:{type:String,required:!0},isNotFollowingText:{type:String,required:!0},isFollowingAria:{type:String,required:!0},isNotFollowingAria:{type:String,required:!0}},components:{vfButton:s.a},computed:{currentText:function(){return this.canShowUnfollow?this.unfollowText:this.isFollowing?this.isFollowingText:this.isNotFollowingText},currentAriaLabel:function(){return this.isFollowing?this.isFollowingAria:this.isNotFollowingAria},currentPalette:function(){return this.canShowUnfollow?this.PALETTES.DANGER:this.isFollowing?this.PALETTES.SUCCESS:this.PALETTES.ACCENT},longestText:function(){return[this.unfollowText,this.isFollowingText,this.isNotFollowingText].reduce((function(t,e){return t.length>e.length?t:e}))},canShowUnfollow:function(){return this.isFollowing&&!this.wasJustClicked&&this.isEntered}},methods:{toggleEntered:function(t){this.isEntered=t,t||(this.wasJustClicked=!1)},setClicked:function(){this.wasJustClicked=!0}},directives:{hovered:o.a,innerFocus:r.a}},c=(n(787),n(50)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-button",t._g(t._b({directives:[{name:"inner-focus",rawName:"v-inner-focus",value:t.toggleEntered,expression:"toggleEntered"},{name:"hovered",rawName:"v-hovered",value:t.toggleEntered,expression:"toggleEntered"}],staticClass:"vf-follow-button vf-label-text",attrs:{"is-cta":"",palette:t.currentPalette,size:t.SIZES.TINY,"is-inverted":!t.isFollowing},on:{click:t.setClicked}},"vf-button",t.$attrs,!1),t.$listeners),[n("span",{staticClass:"vf-offscreen-text",attrs:{"aria-live":"polite"}},[t._v("\n        "+t._s(t.currentAriaLabel)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__text vf-flex vf-centered",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.currentText)+"\n    ")]),t._v(" "),n("span",{staticClass:"vf-follow-button__hidden-text",attrs:{"aria-hidden":"true"}},[t._v("\n        "+t._s(t.longestText)+"\n    ")])])}),[],!1,null,"768c0df0",null);e.a=u.exports},885:function(t,e,n){"use strict";var i=n(140),r=n(576),o=n(624),s={root:null,threshold:1},a={props:{isTyping:Boolean},data:function(){return{hasTyped:this.isTyping,isInViewPort:!1}},computed:{isVisible:function(){return this.isInViewPort&&this.isTyping}},methods:{onIntersection:function(t,e){var n=t[0];this.isInViewPort=this.hasTyped||n.isIntersecting,this.hasTyped&&e.unobserve(n.target)}},mounted:function(){var t=this;Object(i.d)().then((function(){Object(i.a)(t.$el,(function(e,n){return t.onIntersection(e,n)}),s)}))},watch:{isVisible:function(){this.hasTyped=!0}},components:{contentLayout:r.a,typingIndicator:o.a}},c=(n(709),n(50)),u=Object(c.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-typing-indicator",class:{"top-typing-indicator--entered":t.hasTyped,"top-typing-indicator--visible":t.isVisible}},[n("content-layout",{staticClass:"top-typing-indicator__internal",scopedSlots:t._u([{key:"left",fn:function(){return[n("typing-indicator",{staticClass:"top-typing-indicator__indicator",attrs:{"is-typing":t.isVisible}})]},proxy:!0},{key:"right",fn:function(){return[n("transition",{attrs:{name:"fade"}},[t.isVisible?n("div",{staticClass:"top-typing-indicator__text",attrs:{"aria-live":"polite"}},[t._v("\n                    "+t._s(t.$i18n("conversations.typing.top_level"))+"\n                ")]):t._e()])]},proxy:!0}])})],1)}),[],!1,null,"d8935f78",null);e.a=u.exports},887:function(t,e,n){"use strict";var i={props:{enterActiveClass:{type:String,default:""},leaveActiveClass:{type:String,default:""},hasNoSeparator:{type:Boolean,default:!1},hasHeightTransition:{type:Boolean,default:!1}},data:function(){return{hasSlotData:!1}},updated:function(){this.hasSlotData=this.$slots.default&&this.$slots.default.length>0},computed:{commonProps:function(){return{tag:"ol",class:{"vf3-conversations-list":!0,"vf3-conversations-list--empty":!this.hasSlotData,"vf3-conversations-list--no-separator":this.hasNoSeparator}}}},methods:{onEnter:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["enter"].concat(e))},onLeave:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["leave"].concat(e))}}},r=(n(742),n(50)),o=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasHeightTransition?n("transition-group",t._b({attrs:{name:"fade-scale"}},"transition-group",t.commonProps,!1),[t._t("default")],2):n("transition-group",t._b({attrs:{"enter-active-class":t.enterActiveClass,"leave-active-class":t.leaveActiveClass},on:{enter:t.onEnter,leave:t.onLeave}},"transition-group",t.commonProps,!1),[t._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},888:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(36),n(37);var i=n(138),r=n(0),o=n(217),s=n(609),a=n(24);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={props:{contentContainerUuid:a.a.uuid.isRequired,threadUuid:a.a.uuid.isRequired,headerHeightPx:a.a.number,storeAction:a.a.string.isRequired,maximumContentLength:a.a.number.def(1/0),contentComponent:a.a.object.isRequired,isExpanded:a.a.bool,limit:a.a.number.isRequired,fetchRepliesAction:a.a.string.isRequired,fetchSelectedAction:a.a.string.isRequired,hasBorder:a.a.bool},data:function(){return{shouldBeExpanded:this.isExpanded}},inject:[o.e],computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.d)({threadByUuid:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Pc)]},threadOldContentCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Qc)]},threadRealtimeCount:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Sc)]},hasUnreadRepliesInThreadByCurrentUser:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Ab)]}}),{},Object(i.c)({contentByThreadUuid:r.O,mentionNotificationsByThreadUuid:r.Zc}),{thread:function(){return this.threadByUuid(this.threadUuid)},subthreads:function(){return this.thread.visible_content},threadPalette:function(){return this.thread.thread_palette},oldReplyCount:function(){return this.threadOldContentCount(this.threadUuid)},oldMentionsInThread:function(){var t=this;return this.mentionNotificationsByThreadUuid(this.threadUuid).filter((function(e){var n=e.content_uuid;return!t.thread.visible_content.includes(n)&&!t.thread.realtime_content.includes(n)}))},oldMentionCount:function(){return this.oldMentionsInThread.length},realtimeCount:function(){return this.threadRealtimeCount(this.threadUuid)},hasUnreadRepliesByCurrentUser:function(){return this.hasUnreadRepliesInThreadByCurrentUser(this.threadUuid)}}),watch:{hasUnreadRepliesByCurrentUser:function(t){t&&!this.isExpanded&&(this.shouldBeExpanded=!0)}},components:{vfThread:s.a}},d=n(50),f=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vf-thread",{attrs:{"thread-uuid":t.threadUuid,"old-reply-count":t.oldReplyCount,"realtime-count":t.realtimeCount,subthreads:t.subthreads,"thread-palette":t.threadPalette,"store-action":t.storeAction,"maximum-content-length":t.maximumContentLength,"is-expanded":t.isExpanded||t.shouldBeExpanded,"content-container-uuid":t.contentContainerUuid,limit:t.limit,"fetch-replies-action":t.fetchRepliesAction,"fetch-selected-action":t.fetchSelectedAction,"header-height-px":t.headerHeightPx,"old-mentions-in-thread":t.oldMentionsInThread,"has-border":t.hasBorder},scopedSlots:t._u([{key:"head",fn:function(e){return[n(t.contentComponent,{tag:"component",staticClass:"vf-thread__head",attrs:{"thread-uuid":t.threadUuid,"thread-palette":t.threadPalette,"location-in-thread":e.locationInThread}})]}},{key:"reply",fn:function(e){return[n(t.contentComponent,{tag:"component",staticClass:"vf-thread__reply",attrs:{"is-reply":"","thread-uuid":e.threadUuid,"location-in-thread":e.locationInThread,"thread-palette":t.threadPalette}})]}}])})}),[],!1,null,null,null);e.a=f.exports},889:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18);var i=n(3),r=n(0),o=n(138),s=n(217),a=n(126),c=n(107),u=n(140),l=n(613),d=n(24);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={props:{widgetTag:d.a.string.isRequired,enabled:d.a.bool.def(!1),threadUuid:d.a.uuid.isRequired,index:d.a.number.isRequired,contentContainerType:d.a.string.isRequired,threadType:d.a.string.def("main_thread")},inject:[s.e],data:function(){return{isThresholdReached:!1}},mounted:function(){this.isPromoPlacement&&this.initializeLoadTracker()},computed:h({},Object(o.d)({isThreadPromoPlacement:function(t,e){return e["".concat(this.THREAD_NAMESPACE,"/").concat(r.Tb)]}}),{},Object(o.c)({contentContainerUuidByContentUuid:r.S}),{contentContainerUuid:function(){return this.contentContainerUuidByContentUuid(this.threadUuid)},isPromoPlacement:function(){return this.enabled&&this.isThreadPromoPlacement(this.contentContainerUuid,this.threadUuid)},isReadyToLoad:function(){return this.isPromoPlacement&&this.isThresholdReached},adSettings:function(){return this.contentContainerType===c.e?{ad_integration:a.i,site_ad_id:a.j,widget_tag:this.widgetTag}:{ad_integration:a.a,site_ad_id:a.l,widget_tag:this.widgetTag}},eventPayload:function(){return{content_container_uuid:this.contentContainerUuid,content_container_type:this.contentContainerType,index:this.index,thread_type:this.threadType,widget:this.widgetTag,ad_setting:this.adSettings.ad_integration}}}),methods:h({},Object(o.b)({trackAdEvent:i.fd}),{initializeLoadTracker:function(){var t=this;Object(u.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"500px"}).then((function(){t.isThresholdReached=!0,t.trackAdEvent(h({},t.eventPayload,{event_type:"track_ad_load"})),t.initializeViewTracker()}))},initializeViewTracker:function(){var t=this;Object(u.b)(this.$el,(function(t){return t.isIntersecting}),{rootMargin:"-90px"}).then((function(){t.trackAdEvent(h({},t.eventPayload,{event_type:"track_ad_view"}))}))}}),watch:{isPromoPlacement:{handler:function(){this.isPromoPlacement&&this.initializeLoadTracker()}}},components:{vfPromo:l.a}},m=n(50),v=Object(m.a)(b,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.isPromoPlacement,expression:"isPromoPlacement"}]},[this.isReadyToLoad?e("vf-promo",{attrs:{"unique-id":this.threadUuid,"ad-settings":this.adSettings}}):this._e()],1)}),[],!1,null,null,null);e.a=v.exports},890:function(t,e,n){"use strict";var i=n(575),r=n(446),o=n(217),s={props:{hasReason:{type:Boolean,default:!1}},inject:[o.a],components:{textTip:i.a,squareBadge:r.a}},a=(n(726),n(50)),c=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("square-badge",{staticClass:"vf-disabled-badge",attrs:{palette:t.PALETTES.DANGER,"aria-label":t.$i18n("conversations.moderation.disabled_aria_label")}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.disabled_content"))+"\n    "),t.hasReason?[t._v("\n        \n        "),n("text-tip",{staticClass:"vf-disabled-badge__text-tip",attrs:{content:t.$i18n("conversations.moderation.disabled_reason"),positions:["right"]},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._v("\n                "+t._s(t.$i18n("conversations.moderation.disabled_reason_trigger"))+"\n            ")]},proxy:!0}],null,!1,1315484605)})]:t._e()],2)}),[],!1,null,"ff4ef160",null);e.a=c.exports},891:function(t,e,n){"use strict";var i=n(446),r=n(217),o={props:{isGhost:{type:Boolean,required:!0}},inject:[r.a,r.b],components:{squareBadge:i.a}},s=n(50),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("square-badge",{staticClass:"vf-banned-badge",attrs:{palette:t.PALETTES.WARING,size:t.SIZES.SMALL}},[t._v("\n    "+t._s(t.$i18n("conversations.moderation.comment_status_banned"))+"\n    "),t.isGhost?[t._v("\n        \n    ")]:t._e()],2)}),[],!1,null,null,null);e.a=a.exports},892:function(t,e,n){"use strict";var i=n(574),r={props:{isNew:{type:Boolean,default:!1},palette:String},components:{unseenNotifier:i.a}},o=(n(728),n(50)),s=Object(o.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[this.isNew?e("unseen-notifier",{staticClass:"unseen-notifier",attrs:{palette:this.palette}}):this._e()],1)}),[],!1,null,"ebabf514",null);e.a=s.exports},893:function(t,e,n){"use strict";n(41),n(12),n(6),n(7),n(4),n(18),n(36),n(37);var i=n(0),r=n(138),o=n(13),s=n(123),a=n(886),c=n(896),u=n(537),l=n(894),d=n(626),f=n(562),h=n(625),p=n(968),b=n(722),m=n(67),v=n(953),_=n(452),g=n(954),y=n(24);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=[{key:_.a.EDIT,value:"conversations.actions.edit",icon:l.a,test:i.t},{key:_.a.REMOVE,value:"conversations.actions.remove_post",icon:d.a,test:i.v},{key:_.a.DISABLE,value:"conversations.actions.disable_post",icon:h.a,test:i.p},{key:_.a.ENABLE,value:"conversations.actions.enable_post",icon:f.a,test:i.s},{key:_.a.PIN,value:"conversations.actions.pin_post",icon:f.a,test:i.u},{key:_.a.UNPIN,value:"conversations.actions.unpin_post",icon:h.a,test:i.x}],S={props:{content:y.a.object.isRequired,isFlagEnabled:y.a.bool.def(!1),isSpamEnabled:y.a.bool.def(!0),isLiveComments:y.a.bool.def(!1),isEntered:y.a.bool.def(!1),isContentRemovalEnabled:y.a.bool.def(!1),isContentEditingEnabled:y.a.bool.def(!1),contentEditingDuration:y.a.number.def(0)},created:function(){this.isMobileOrTablet=s.e,this.ellipsisIcon=c.a,this.editorPickKey=_.a.TOGGLE_EDITORS_PICK},data:function(){return{isDropdownToggled:!1}},computed:E({},Object(r.c)({currentUser:i.eb,siteSettings:i.Dc,getUserByUuid:i.ed,canModifyContent:i.t,currentTime:i.db}),{contentActor:function(){return this.getUserByUuid(this.content.actor_uuid)},canCurrentUserModerate:function(){return Object(o.n)(this.currentUser)},isContentTopLevel:function(){return this.content.parent_uuid===this.content.content_container_uuid},isContentEditable:function(){var t=this.content,e=t.content_uuid,n=t.date_created;return this.isContentEditingEnabled&&this.canModifyContent(e)&&(this.contentEditingDuration===1/0||this.currentTime-n<this.contentEditingDuration)},actions:function(){var t=this,e=this.isLiveComments?[{key:this.canCurrentUserModerate?_.a.TOGGLE_FLAG:_.a.FLAG,value:this.flagText,icon:u.a,test:Boolean(s.e&&this.isFlagEnabled&&Object(o.f)(this.currentUser,this.siteSettings,this.contentActor)),disabled:Boolean(!this.canCurrentUserModerate&&this.isFlagged)},{key:_.a.EDIT,value:"conversations.actions.edit",test:Boolean(this.isContentEditable),buttonClass:"vf-secondary-actions__edit",component:v.a,componentProps:{endTime:this.content.date_created+this.contentEditingDuration,secondsRemainingToShowCountdown:this.contentEditingDuration===1/0?0:300}},{key:_.a.REMOVE,value:this.removeText,icon:d.a,test:Boolean(this.$store.getters[i.v](this.content.content_uuid)&&this.isContentRemovalEnabled),className:"vf-secondary-actions__remove"},{key:_.a.TOGGLE_SPAM,value:this.spamText,icon:p.a,test:this.canCurrentUserModerate&&this.isSpamEnabled,buttonClass:"vf-secondary-actions__spam"},{key:_.a.TOGGLE_EDITORS_PICK,test:this.canCurrentUserModerate},{key:_.a.TOGGLE_DISABLE,value:this.disableText,icon:this.disableIcon,test:this.canCurrentUserModerate&&!this.isDeleted,buttonClass:"vf-secondary-actions__disable"},{key:_.a.TOGGLE_PIN,value:this.pinText,icon:b.a,test:this.canCurrentUserModerate&&this.isContentTopLevel,buttonClass:"vf-secondary-actions__pin"}]:T;return e.filter((function(e){var n=e.test;return t.test(n)})).map((function(e){return t.transformAction(e)}))},hasActions:function(){return this.actions.length>0},isFlagged:function(){return this.content.actions.includes(_.a.FLAG)},isSpam:function(){return this.content.state_reasons.includes(m.d.CONTENT_MARKED_AS_SPAM)},isDisabled:function(){return this.content.state_reasons.includes(m.d.CONTENT_DISABLED)},isDeleted:function(){return this.content.state_reasons.includes(m.d.CONTENT_DELETED)},flagText:function(){return this.canCurrentUserModerate?this.isFlagged?"conversations.actions.unflag":"conversations.posts.flag.verb":this.isFlagged?"conversations.posts.flag.past":"conversations.posts.flag.verb"},spamText:function(){return this.isSpam?"conversations.actions.unspam":"conversations.actions.mark_as_spam"},disableText:function(){return this.isDisabled?"conversations.actions.enable":"conversations.actions.disable"},removeText:function(){return this.isLiveComments?"conversations.actions.remove_comment":"conversations.actions.remove_post"},pinText:function(){return this.content.is_pinned?"conversations.actions.unpin":"conversations.actions.pin"},disableIcon:function(){return this.isDisabled?f.a:h.a}}),methods:{transformAction:function(t){return E({},t,{value:t.value?this.$i18n(t.value):"",class:"vf-".concat(t.key,"-content")})},test:function(t){return"boolean"!=typeof t?this.$store.getters[t](this.content.content_uuid):t},setIsDropdownToggled:function(t){this.isDropdownToggled=t}},components:{iconDropdown:a.a,editorPickButton:g.a}},j=(n(725),n(50)),A=Object(j.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasActions?n("icon-dropdown",{staticClass:"vf-secondary-actions",class:{"vf-secondary-actions--entered":t.isEntered||t.isMobileOrTablet||t.isDropdownToggled},attrs:{positions:["bottom-left"],items:t.actions,icon:t.ellipsisIcon,"aria-label":t.$i18n("conversations.actions.button_aria"),"hide-on-mouseleave":""},on:{toggled:t.setIsDropdownToggled,"list-item-clicked":function(e){return t.$emit(e.key)}},scopedSlots:t._u([{key:t.editorPickKey,fn:function(){return[n("editor-pick-button",{staticClass:"vf-secondary-actions__editors-pick",attrs:{"is-picked":t.content.is_picked},on:{click:function(e){return t.$emit(t.editorPickKey)}}})]},proxy:!0}],null,!0)}):t._e()}),[],!1,null,"567ee9a1",null);e.a=A.exports},897:function(t,e,n){"use strict";n(41),n(7),n(18),n(28),n(23),n(4),n(15),n(27),n(6),n(30),n(12);var i=n(446),r=n(285);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render:function(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-pending-badge",n.staticClass].concat(c(n.class||[])),props:{palette:r.a.WARNING,ariaLabel:o.$i18n("conversations.moderation.awaiting_moderation_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.moderation.awaiting_moderation")])}},d=n(50),f=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=f.exports},898:function(t,e,n){"use strict";n(41),n(7),n(18),n(28),n(23),n(4),n(15),n(27),n(6),n(30),n(12);var i=n(446);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render:function(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-muted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.muted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.muted")])}},l=n(50),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},899:function(t,e,n){"use strict";n(41),n(7),n(18),n(28),n(23),n(4),n(15),n(27),n(6),n(30),n(12);var i=n(446);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={functional:!0,render:function(t,e){var n=e.data,r=e.parent;return t(i.a,{class:["vf-deleted-badge",n.staticClass].concat(a(n.class||[])),props:{disabled:!0,ariaLabel:r.$i18n("conversations.posts.deleted_aria_label")},attrs:o({},n.attrs||[])},[r.$i18n("conversations.posts.deleted")])}},l=n(50),d=Object(l.a)(u,void 0,void 0,!1,null,null,null);e.a=d.exports},900:function(t,e,n){"use strict";n(41),n(7),n(18),n(28),n(23),n(4),n(15),n(27),n(6),n(30),n(12);var i=n(446),r=n(286);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l={functional:!0,render:function(t,e){var n=e.data,o=e.parent;return t(i.a,{class:["vf-edited-badge",n.staticClass].concat(c(n.class||[])),props:{disabled:!0,size:r.a.SMALL,ariaLabel:o.$i18n("conversations.posts.edited_aria_label")},attrs:s({},n.attrs||[])},[o.$i18n("conversations.posts.edited")])}},d=n(50),f=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=f.exports},901:function(t,e,n){"use strict";n(43);var i=2;function r(t,e){return t<.5?function(t,e){return Math.pow(t,e)}(2*t,e)/2:function(t,e){return 1-Math.abs(Math.pow(t-1,e))}(2*t-1,e)/2+.5}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return n*r(t/o,i)+e}n.d(e,"a",(function(){return a}));var s={duration:1e3,isVertical:!1,cb:function(){}};function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign({},s,n),r=i.isVertical,a=i.duration,c=i.cb,u=r?"scrollTop":"scrollLeft",l=t[u],d=e-l,f=20,h=0,p=function e(){h+=f,t[u]=o(h,l,d,a),h<a?setTimeout(e,f):c()};setTimeout(p,f)}}}]);